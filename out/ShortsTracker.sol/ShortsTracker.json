{"abi":[{"type":"constructor","inputs":[{"name":"_vault","type":"address","internalType":"address"}],"stateMutability":"nonpayable"},{"type":"function","name":"MAX_INT256","inputs":[],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"_getNextGlobalAveragePrice","inputs":[{"name":"_averagePrice","type":"uint256","internalType":"uint256"},{"name":"_nextPrice","type":"uint256","internalType":"uint256"},{"name":"_nextSize","type":"uint256","internalType":"uint256"},{"name":"_delta","type":"uint256","internalType":"uint256"},{"name":"_realisedPnl","type":"int256","internalType":"int256"}],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"pure"},{"type":"function","name":"data","inputs":[{"name":"","type":"bytes32","internalType":"bytes32"}],"outputs":[{"name":"","type":"bytes32","internalType":"bytes32"}],"stateMutability":"view"},{"type":"function","name":"getGlobalShortDelta","inputs":[{"name":"_token","type":"address","internalType":"address"}],"outputs":[{"name":"","type":"bool","internalType":"bool"},{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"getNextGlobalShortData","inputs":[{"name":"_account","type":"address","internalType":"address"},{"name":"_collateralToken","type":"address","internalType":"address"},{"name":"_indexToken","type":"address","internalType":"address"},{"name":"_nextPrice","type":"uint256","internalType":"uint256"},{"name":"_sizeDelta","type":"uint256","internalType":"uint256"},{"name":"_isIncrease","type":"bool","internalType":"bool"}],"outputs":[{"name":"","type":"uint256","internalType":"uint256"},{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"getRealisedPnl","inputs":[{"name":"_account","type":"address","internalType":"address"},{"name":"_collateralToken","type":"address","internalType":"address"},{"name":"_indexToken","type":"address","internalType":"address"},{"name":"_sizeDelta","type":"uint256","internalType":"uint256"},{"name":"_isIncrease","type":"bool","internalType":"bool"}],"outputs":[{"name":"","type":"int256","internalType":"int256"}],"stateMutability":"view"},{"type":"function","name":"globalShortAveragePrices","inputs":[{"name":"","type":"address","internalType":"address"}],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"gov","inputs":[],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"function","name":"isGlobalShortDataReady","inputs":[],"outputs":[{"name":"","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"function","name":"isHandler","inputs":[{"name":"","type":"address","internalType":"address"}],"outputs":[{"name":"","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"function","name":"setGov","inputs":[{"name":"_gov","type":"address","internalType":"address"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"setHandler","inputs":[{"name":"_handler","type":"address","internalType":"address"},{"name":"_isActive","type":"bool","internalType":"bool"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"setInitData","inputs":[{"name":"_tokens","type":"address[]","internalType":"address[]"},{"name":"_averagePrices","type":"uint256[]","internalType":"uint256[]"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"setIsGlobalShortDataReady","inputs":[{"name":"value","type":"bool","internalType":"bool"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"updateGlobalShortData","inputs":[{"name":"_account","type":"address","internalType":"address"},{"name":"_collateralToken","type":"address","internalType":"address"},{"name":"_indexToken","type":"address","internalType":"address"},{"name":"_isLong","type":"bool","internalType":"bool"},{"name":"_sizeDelta","type":"uint256","internalType":"uint256"},{"name":"_markPrice","type":"uint256","internalType":"uint256"},{"name":"_isIncrease","type":"bool","internalType":"bool"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"vault","inputs":[],"outputs":[{"name":"","type":"address","internalType":"contract IVault"}],"stateMutability":"view"},{"type":"event","name":"GlobalShortDataUpdated","inputs":[{"name":"token","type":"address","indexed":true,"internalType":"address"},{"name":"globalShortSize","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"globalShortAveragePrice","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false}],"bytecode":{"object":"0x608060405234801561001057600080fd5b506040516111943803806111948339818101604052602081101561003357600080fd5b5051600080546001600160a01b03199081163317909155600180546001600160a01b0390931692909116919091179055611122806100726000396000f3fe608060405234801561001057600080fd5b50600436106101005760003560e01c80639cb7de4b11610097578063bbd9718711610066578063bbd9718714610334578063cfad57a2146103f6578063f3238cec1461041c578063fbfa77cf1461046e57610100565b80639cb7de4b1461021e5780639cdeb5931461024c578063a83b75fd146102af578063b364accb146102f357610100565b806346ea87af116100d357806346ea87af146101815780635886b711146101bb57806362749803146101f05780639a11178f1461021657610100565b80630147fb0c14610105578063122e7b071461013457806312d43a511461013c5780633d30cabf14610160575b600080fd5b6101226004803603602081101561011b57600080fd5b5035610476565b60408051918252519081900360200190f35b610122610488565b610144610493565b604080516001600160a01b039092168252519081900360200190f35b61017f6004803603602081101561017657600080fd5b503515156104a2565b005b6101a76004803603602081101561019757600080fd5b50356001600160a01b031661050c565b604080519115158252519081900360200190f35b610122600480360360a08110156101d157600080fd5b5080359060208101359060408101359060608101359060800135610521565b6101226004803603602081101561020657600080fd5b50356001600160a01b0316610578565b6101a761058a565b61017f6004803603604081101561023457600080fd5b506001600160a01b0381351690602001351515610593565b610296600480360360c081101561026257600080fd5b506001600160a01b03813581169160208101358216916040820135169060608101359060808101359060a001351515610670565b6040805192835260208301919091528051918290030190f35b610122600480360360a08110156102c557600080fd5b506001600160a01b0381358116916020810135821691604082013516906060810135906080013515156107c4565b6103196004803603602081101561030957600080fd5b50356001600160a01b03166109aa565b60408051921515835260208301919091528051918290030190f35b61017f6004803603604081101561034a57600080fd5b81019060208101813564010000000081111561036557600080fd5b82018360208201111561037757600080fd5b8035906020019184602083028401116401000000008311171561039957600080fd5b9193909290916020810190356401000000008111156103b757600080fd5b8201836020820111156103c957600080fd5b803590602001918460208302840111640100000000831117156103eb57600080fd5b509092509050610b1d565b61017f6004803603602081101561040c57600080fd5b50356001600160a01b0316610c39565b61017f600480360360e081101561043257600080fd5b506001600160a01b038135811691602081013582169160408201351690606081013515159060808101359060a08101359060c001351515610cb2565b610144610da7565b60036020526000908152604090205481565b6001600160ff1b0381565b6000546001600160a01b031681565b6000546001600160a01b031633146104f9576040805162461bcd60e51b815260206004820152601560248201527423b7bb32b93730b136329d103337b93134b23232b760591b604482015290519081900360640190fd5b6005805460ff1916911515919091179055565b60026020526000908152604090205460ff1681565b600080600061053285898987610db6565b9150915060006105698361054f5761054a8884610e73565b610559565b6105598884610ed6565b6105638a8a610f18565b90610f71565b93505050505b95945050505050565b60046020526000908152604090205481565b60055460ff1681565b6000546001600160a01b031633146105ea576040805162461bcd60e51b815260206004820152601560248201527423b7bb32b93730b136329d103337b93134b23232b760591b604482015290519081900360640190fd5b6001600160a01b038216610645576040805162461bcd60e51b815260206004820152601f60248201527f53686f727473547261636b65723a20696e76616c6964205f68616e646c657200604482015290519081900360640190fd5b6001600160a01b03919091166000908152600260205260409020805460ff1916911515919091179055565b600080600061068289898988886107c4565b6001600160a01b0388166000908152600460205260408120549192508782116106b4576106af8883610ed6565b6106be565b6106be8289610ed6565b6001546040805163114f1b5560e31b81526001600160a01b038d811660048301529151939450600093849384931691638a78daa8916024808301926020929190829003018186803b15801561071257600080fd5b505afa158015610726573d6000803e3d6000fd5b505050506040513d602081101561073c57600080fd5b50519050886107545761074f818b610ed6565b61075e565b61075e818b610e73565b92508261077757600080975097505050505050506107b9565b8461078d57828b975097505050505050506107b9565b61079b856105638387610f18565b91505060006107ad858c85858a610521565b92975091955050505050505b965096945050505050565b600081156107d45750600061056f565b60015460408051634a3f088d60e01b81526001600160a01b038981166004830152888116602483015287811660448301526000606483018190529251931692829182918591634a3f088d91608480830192610100929190829003018186803b15801561083f57600080fd5b505afa158015610853573d6000803e3d6000fd5b505050506040513d61010081101561086a57600080fd5b50805160408083015160e0909301518151635c07eaab60e01b81526001600160a01b038d811660048301526024820185905260448201869052600060648301819052608483018490528451959950959750919550849391891692635c07eaab9260a480840193829003018186803b1580156108e457600080fd5b505afa1580156108f8573d6000803e3d6000fd5b505050506040513d604081101561090e57600080fd5b5080516020909101519092509050600061092c866105638c85610f18565b90506001600160ff1b038110610989576040805162461bcd60e51b815260206004820152601760248201527f53686f727473547261636b65723a206f766572666c6f77000000000000000000604482015290519081900360640190fd5b826109975780600003610999565b805b9d9c50505050505050505050505050565b6001546040805163114f1b5560e31b81526001600160a01b038481166004830152915160009384938493911691638a78daa891602480820192602092909190829003018186803b1580156109fd57600080fd5b505afa158015610a11573d6000803e3d6000fd5b505050506040513d6020811015610a2757600080fd5b50516001600160a01b03851660009081526004602052604090205490915081610a5857600080935093505050610b18565b60015460408051637092736960e11b81526001600160a01b0388811660048301529151600093929092169163e124e6d291602480820192602092909190829003018186803b158015610aa957600080fd5b505afa158015610abd573d6000803e3d6000fd5b505050506040513d6020811015610ad357600080fd5b505190506000818311610aef57610aea8284610ed6565b610af9565b610af98383610ed6565b90506000610b0b846105638785610f18565b9290931195509093505050505b915091565b6000546001600160a01b03163314610b74576040805162461bcd60e51b815260206004820152601560248201527423b7bb32b93730b136329d103337b93134b23232b760591b604482015290519081900360640190fd5b60055460ff1615610bcc576040805162461bcd60e51b815260206004820152601f60248201527f53686f727473547261636b65723a20616c7265616479206d6967726174656400604482015290519081900360640190fd5b60005b83811015610c2557828282818110610be357fe5b9050602002013560046000878785818110610bfa57fe5b602090810292909201356001600160a01b031683525081019190915260400160002055600101610bcf565b50506005805460ff19166001179055505050565b6000546001600160a01b03163314610c90576040805162461bcd60e51b815260206004820152601560248201527423b7bb32b93730b136329d103337b93134b23232b760591b604482015290519081900360640190fd5b600080546001600160a01b0319166001600160a01b0392909216919091179055565b3360009081526002602052604090205460ff16610d16576040805162461bcd60e51b815260206004820152601860248201527f53686f727473547261636b65723a20666f7262696464656e0000000000000000604482015290519081900360640190fd5b8380610d20575082155b15610d2a57610d9e565b60055460ff16610d3957610d9e565b600080610d4a898989878988610670565b91509150610d588782610fb3565b604080518381526020810183905281516001600160a01b038a16927fd6137be44db128ffcf1ea1821dbe8f889f67f949be7656c2d8acba2a4a891a02928290030190a250505b50505050505050565b6001546001600160a01b031681565b6000808385118015610e15576000841315610dfa5786841115610de857610ddd8488610ed6565b965060009050610df5565b610df28785610ed6565b96505b610e0b565b610e08876000869003610e73565b96505b9150859050610e6a565b6000841315610e2f57610e288785610e73565b9650610e64565b86846000031115610e5357610e48600085900388610ed6565b965060019050610e64565b610e61876000869003610ed6565b96505b91508590505b94509492505050565b600082820183811015610ecd576040805162461bcd60e51b815260206004820152601b60248201527f536166654d6174683a206164646974696f6e206f766572666c6f770000000000604482015290519081900360640190fd5b90505b92915050565b6000610ecd83836040518060400160405280601e81526020017f536166654d6174683a207375627472616374696f6e206f766572666c6f770000815250610fcf565b600082610f2757506000610ed0565b82820282848281610f3457fe5b0414610ecd5760405162461bcd60e51b81526004018080602001828103825260218152602001806110cc6021913960400191505060405180910390fd5b6000610ecd83836040518060400160405280601a81526020017f536166654d6174683a206469766973696f6e206279207a65726f000000000000815250611066565b6001600160a01b03909116600090815260046020526040902055565b6000818484111561105e5760405162461bcd60e51b81526004018080602001828103825283818151815260200191508051906020019080838360005b8381101561102357818101518382015260200161100b565b50505050905090810190601f1680156110505780820380516001836020036101000a031916815260200191505b509250505060405180910390fd5b505050900390565b600081836110b55760405162461bcd60e51b815260206004820181815283516024840152835190928392604490910191908501908083836000831561102357818101518382015260200161100b565b5060008385816110c157fe5b049594505050505056fe536166654d6174683a206d756c7469706c69636174696f6e206f766572666c6f77a2646970667358221220f98e732814b87652fb4026edb42fb566a5fa6d5da82246c1317fdce17b0081bc64736f6c634300060c0033","sourceMap":"212:7259:90:-:0;;;850:74;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;850:74:90;140:3:72;:16;;146:10;-1:-1:-1;;;;;;140:16:72;;;;;;-1:-1:-1;895:22:90;;;;;-1:-1:-1;;;;;895:22:90;;;;;;;;;;-1:-1:-1;;;;212:7259:90;;;;","linkReferences":{}},"deployedBytecode":{"object":"0x608060405234801561001057600080fd5b50600436106101005760003560e01c80639cb7de4b11610097578063bbd9718711610066578063bbd9718714610334578063cfad57a2146103f6578063f3238cec1461041c578063fbfa77cf1461046e57610100565b80639cb7de4b1461021e5780639cdeb5931461024c578063a83b75fd146102af578063b364accb146102f357610100565b806346ea87af116100d357806346ea87af146101815780635886b711146101bb57806362749803146101f05780639a11178f1461021657610100565b80630147fb0c14610105578063122e7b071461013457806312d43a511461013c5780633d30cabf14610160575b600080fd5b6101226004803603602081101561011b57600080fd5b5035610476565b60408051918252519081900360200190f35b610122610488565b610144610493565b604080516001600160a01b039092168252519081900360200190f35b61017f6004803603602081101561017657600080fd5b503515156104a2565b005b6101a76004803603602081101561019757600080fd5b50356001600160a01b031661050c565b604080519115158252519081900360200190f35b610122600480360360a08110156101d157600080fd5b5080359060208101359060408101359060608101359060800135610521565b6101226004803603602081101561020657600080fd5b50356001600160a01b0316610578565b6101a761058a565b61017f6004803603604081101561023457600080fd5b506001600160a01b0381351690602001351515610593565b610296600480360360c081101561026257600080fd5b506001600160a01b03813581169160208101358216916040820135169060608101359060808101359060a001351515610670565b6040805192835260208301919091528051918290030190f35b610122600480360360a08110156102c557600080fd5b506001600160a01b0381358116916020810135821691604082013516906060810135906080013515156107c4565b6103196004803603602081101561030957600080fd5b50356001600160a01b03166109aa565b60408051921515835260208301919091528051918290030190f35b61017f6004803603604081101561034a57600080fd5b81019060208101813564010000000081111561036557600080fd5b82018360208201111561037757600080fd5b8035906020019184602083028401116401000000008311171561039957600080fd5b9193909290916020810190356401000000008111156103b757600080fd5b8201836020820111156103c957600080fd5b803590602001918460208302840111640100000000831117156103eb57600080fd5b509092509050610b1d565b61017f6004803603602081101561040c57600080fd5b50356001600160a01b0316610c39565b61017f600480360360e081101561043257600080fd5b506001600160a01b038135811691602081013582169160408201351690606081013515159060808101359060a08101359060c001351515610cb2565b610144610da7565b60036020526000908152604090205481565b6001600160ff1b0381565b6000546001600160a01b031681565b6000546001600160a01b031633146104f9576040805162461bcd60e51b815260206004820152601560248201527423b7bb32b93730b136329d103337b93134b23232b760591b604482015290519081900360640190fd5b6005805460ff1916911515919091179055565b60026020526000908152604090205460ff1681565b600080600061053285898987610db6565b9150915060006105698361054f5761054a8884610e73565b610559565b6105598884610ed6565b6105638a8a610f18565b90610f71565b93505050505b95945050505050565b60046020526000908152604090205481565b60055460ff1681565b6000546001600160a01b031633146105ea576040805162461bcd60e51b815260206004820152601560248201527423b7bb32b93730b136329d103337b93134b23232b760591b604482015290519081900360640190fd5b6001600160a01b038216610645576040805162461bcd60e51b815260206004820152601f60248201527f53686f727473547261636b65723a20696e76616c6964205f68616e646c657200604482015290519081900360640190fd5b6001600160a01b03919091166000908152600260205260409020805460ff1916911515919091179055565b600080600061068289898988886107c4565b6001600160a01b0388166000908152600460205260408120549192508782116106b4576106af8883610ed6565b6106be565b6106be8289610ed6565b6001546040805163114f1b5560e31b81526001600160a01b038d811660048301529151939450600093849384931691638a78daa8916024808301926020929190829003018186803b15801561071257600080fd5b505afa158015610726573d6000803e3d6000fd5b505050506040513d602081101561073c57600080fd5b50519050886107545761074f818b610ed6565b61075e565b61075e818b610e73565b92508261077757600080975097505050505050506107b9565b8461078d57828b975097505050505050506107b9565b61079b856105638387610f18565b91505060006107ad858c85858a610521565b92975091955050505050505b965096945050505050565b600081156107d45750600061056f565b60015460408051634a3f088d60e01b81526001600160a01b038981166004830152888116602483015287811660448301526000606483018190529251931692829182918591634a3f088d91608480830192610100929190829003018186803b15801561083f57600080fd5b505afa158015610853573d6000803e3d6000fd5b505050506040513d61010081101561086a57600080fd5b50805160408083015160e0909301518151635c07eaab60e01b81526001600160a01b038d811660048301526024820185905260448201869052600060648301819052608483018490528451959950959750919550849391891692635c07eaab9260a480840193829003018186803b1580156108e457600080fd5b505afa1580156108f8573d6000803e3d6000fd5b505050506040513d604081101561090e57600080fd5b5080516020909101519092509050600061092c866105638c85610f18565b90506001600160ff1b038110610989576040805162461bcd60e51b815260206004820152601760248201527f53686f727473547261636b65723a206f766572666c6f77000000000000000000604482015290519081900360640190fd5b826109975780600003610999565b805b9d9c50505050505050505050505050565b6001546040805163114f1b5560e31b81526001600160a01b038481166004830152915160009384938493911691638a78daa891602480820192602092909190829003018186803b1580156109fd57600080fd5b505afa158015610a11573d6000803e3d6000fd5b505050506040513d6020811015610a2757600080fd5b50516001600160a01b03851660009081526004602052604090205490915081610a5857600080935093505050610b18565b60015460408051637092736960e11b81526001600160a01b0388811660048301529151600093929092169163e124e6d291602480820192602092909190829003018186803b158015610aa957600080fd5b505afa158015610abd573d6000803e3d6000fd5b505050506040513d6020811015610ad357600080fd5b505190506000818311610aef57610aea8284610ed6565b610af9565b610af98383610ed6565b90506000610b0b846105638785610f18565b9290931195509093505050505b915091565b6000546001600160a01b03163314610b74576040805162461bcd60e51b815260206004820152601560248201527423b7bb32b93730b136329d103337b93134b23232b760591b604482015290519081900360640190fd5b60055460ff1615610bcc576040805162461bcd60e51b815260206004820152601f60248201527f53686f727473547261636b65723a20616c7265616479206d6967726174656400604482015290519081900360640190fd5b60005b83811015610c2557828282818110610be357fe5b9050602002013560046000878785818110610bfa57fe5b602090810292909201356001600160a01b031683525081019190915260400160002055600101610bcf565b50506005805460ff19166001179055505050565b6000546001600160a01b03163314610c90576040805162461bcd60e51b815260206004820152601560248201527423b7bb32b93730b136329d103337b93134b23232b760591b604482015290519081900360640190fd5b600080546001600160a01b0319166001600160a01b0392909216919091179055565b3360009081526002602052604090205460ff16610d16576040805162461bcd60e51b815260206004820152601860248201527f53686f727473547261636b65723a20666f7262696464656e0000000000000000604482015290519081900360640190fd5b8380610d20575082155b15610d2a57610d9e565b60055460ff16610d3957610d9e565b600080610d4a898989878988610670565b91509150610d588782610fb3565b604080518381526020810183905281516001600160a01b038a16927fd6137be44db128ffcf1ea1821dbe8f889f67f949be7656c2d8acba2a4a891a02928290030190a250505b50505050505050565b6001546001600160a01b031681565b6000808385118015610e15576000841315610dfa5786841115610de857610ddd8488610ed6565b965060009050610df5565b610df28785610ed6565b96505b610e0b565b610e08876000869003610e73565b96505b9150859050610e6a565b6000841315610e2f57610e288785610e73565b9650610e64565b86846000031115610e5357610e48600085900388610ed6565b965060019050610e64565b610e61876000869003610ed6565b96505b91508590505b94509492505050565b600082820183811015610ecd576040805162461bcd60e51b815260206004820152601b60248201527f536166654d6174683a206164646974696f6e206f766572666c6f770000000000604482015290519081900360640190fd5b90505b92915050565b6000610ecd83836040518060400160405280601e81526020017f536166654d6174683a207375627472616374696f6e206f766572666c6f770000815250610fcf565b600082610f2757506000610ed0565b82820282848281610f3457fe5b0414610ecd5760405162461bcd60e51b81526004018080602001828103825260218152602001806110cc6021913960400191505060405180910390fd5b6000610ecd83836040518060400160405280601a81526020017f536166654d6174683a206469766973696f6e206279207a65726f000000000000815250611066565b6001600160a01b03909116600090815260046020526040902055565b6000818484111561105e5760405162461bcd60e51b81526004018080602001828103825283818151815260200191508051906020019080838360005b8381101561102357818101518382015260200161100b565b50505050905090810190601f1680156110505780820380516001836020036101000a031916815260200191505b509250505060405180910390fd5b505050900390565b600081836110b55760405162461bcd60e51b815260206004820181815283516024840152835190928392604490910191908501908083836000831561102357818101518382015260200161100b565b5060008385816110c157fe5b049594505050505056fe536166654d6174683a206d756c7469706c69636174696f6e206f766572666c6f77a2646970667358221220f98e732814b87652fb4026edb42fb566a5fa6d5da82246c1317fdce17b0081bc64736f6c634300060c0033","sourceMap":"212:7259:90:-:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;563:40;;;;;;;;;;;;;;;;-1:-1:-1;563:40:90;;:::i;:::-;;;;;;;;;;;;;;;;420:62;;;:::i;84:18:72:-;;;:::i;:::-;;;;-1:-1:-1;;;;;84:18:72;;;;;;;;;;;;;;1287:120:90;;;;;;;;;;;;;;;;-1:-1:-1;1287:120:90;;;;:::i;:::-;;515:42;;;;;;;;;;;;;;;;-1:-1:-1;515:42:90;-1:-1:-1;;;;;515:42:90;;:::i;:::-;;;;;;;;;;;;;;;;;;5363:520;;;;;;;;;;;;;;;;-1:-1:-1;5363:520:90;;;;;;;;;;;;;;;;;;;;;;:::i;610:69::-;;;;;;;;;;;;;;;;-1:-1:-1;610:69:90;-1:-1:-1;;;;;610:69:90;;:::i;685:43::-;;;:::i;930:195::-;;;;;;;;;;;;;;;;-1:-1:-1;;;;;;930:195:90;;;;;;;;;;:::i;3216:1284::-;;;;;;;;;;;;;;;;-1:-1:-1;;;;;;3216:1284:90;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;3216:1284:90;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;4506:851;;;;;;;;;;;;;;;;-1:-1:-1;;;;;;4506:851:90;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;2250:584::-;;;;;;;;;;;;;;;;-1:-1:-1;2250:584:90;-1:-1:-1;;;;;2250:584:90;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;2841:369;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;2841:369:90;;-1:-1:-1;2841:369:90;-1:-1:-1;2841:369:90;:::i;273:74:72:-;;;;;;;;;;;;;;;;-1:-1:-1;273:74:72;-1:-1:-1;;;;;273:74:72;;:::i;1413:831:90:-;;;;;;;;;;;;;;;;-1:-1:-1;;;;;;1413:831:90;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;1413:831:90;;;;;;;;;;:::i;489:19::-;;;:::i;563:40::-;;;;;;;;;;;;;:::o;420:62::-;-1:-1:-1;;;;;420:62:90;:::o;84:18:72:-;;;-1:-1:-1;;;;;84:18:72;;:::o;1287:120:90:-;220:3:72;;-1:-1:-1;;;;;220:3:72;206:10;:17;198:51;;;;;-1:-1:-1;;;198:51:72;;;;;;;;;;;;-1:-1:-1;;;198:51:72;;;;;;;;;;;;;;;1370:22:90::1;:30:::0;;-1:-1:-1;;1370:30:90::1;::::0;::::1;;::::0;;;::::1;::::0;;1287:120::o;515:42::-;;;;;;;;;;;;;;;:::o;5363:520::-;5565:7;5585:14;5601:17;5622:62;5636:6;5644:13;5659:10;5671:12;5622:13;:62::i;:::-;5584:100;;;;5695:24;5722:120;5778:9;:63;;5817:24;:9;5831;5817:13;:24::i;:::-;5778:63;;;5790:24;:9;5804;5790:13;:24::i;:::-;5722:38;:10;5750:9;5722:27;:38::i;:::-;:55;;:120::i;:::-;5695:147;-1:-1:-1;;;;5363:520:90;;;;;;;;:::o;610:69::-;;;;;;;;;;;;;:::o;685:43::-;;;;;;:::o;930:195::-;220:3:72;;-1:-1:-1;;;;;220:3:72;206:10;:17;198:51;;;;;-1:-1:-1;;;198:51:72;;;;;;;;;;;;-1:-1:-1;;;198:51:72;;;;;;;;;;;;;;;-1:-1:-1;;;;;1019:22:90;::::1;1011:66;;;::::0;;-1:-1:-1;;;1011:66:90;;::::1;;::::0;::::1;::::0;::::1;::::0;;;;::::1;::::0;;;;;;;;;;;;;::::1;;-1:-1:-1::0;;;;;1087:19:90;;;::::1;;::::0;;;:9:::1;:19;::::0;;;;:31;;-1:-1:-1;;1087:31:90::1;::::0;::::1;;::::0;;;::::1;::::0;;930:195::o;3216:1284::-;3455:7;3464;3483:18;3504:79;3519:8;3528:16;3546:11;3559:10;3571:11;3504:14;:79::i;:::-;-1:-1:-1;;;;;3616:37:90;;3593:20;3616:37;;;:24;:37;;;;;;3483:100;;-1:-1:-1;3684:25:90;;;:87;;3743:28;:10;3758:12;3743:14;:28::i;:::-;3684:87;;;3712:28;:12;3729:10;3712:16;:28::i;:::-;3891:5;;:35;;;-1:-1:-1;;;3891:35:90;;-1:-1:-1;;;;;3891:35:90;;;;;;;;;3663:108;;-1:-1:-1;;;;;;;3891:5:90;;:22;;:35;;;;;;;;;;;;;;:5;:35;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;3891:35:90;;-1:-1:-1;3951:11:90;:57;;3988:20;:4;3997:10;3988:8;:20::i;:::-;3951:57;;;3965:20;:4;3974:10;3965:8;:20::i;:::-;3940:68;-1:-1:-1;4027:13:90;4023:65;;4068:1;4071;4060:13;;;;;;;;;;;;4023:65;4106:17;4102:85;;4151:8;4161:10;4143:29;;;;;;;;;;;;4102:85;4209:38;4234:12;4209:20;:4;4218:10;4209:8;:20::i;:38::-;4201:46;;3216:1284;4268:24;4295:152;4335:12;4361:10;4385:8;4407:5;4426:11;4295:26;:152::i;:::-;4466:8;;-1:-1:-1;4268:179:90;;-1:-1:-1;;;;;;3216:1284:90;;;;;;;;;;:::o;4506:851::-;4700:6;4722:11;4718:50;;;-1:-1:-1;4756:1:90;4749:8;;4718:50;4794:5;;4907:66;;;-1:-1:-1;;;4907:66:90;;-1:-1:-1;;;;;4907:66:90;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;4907:66:90;;;;;;;;4794:5;;;-1:-1:-1;;;;4794:5:90;;-1:-1:-1;;4907:66:90;;;;;4794:5;;4907:66;;;;;;;4794:5;4907:66;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;4907:66:90;;;;;;;;;;;;5018:74;;-1:-1:-1;;;5018:74:90;;-1:-1:-1;;;;;5018:74:90;;;;;;;;;;;;;;;;;;;-1:-1:-1;5018:74:90;;;;;;;;;;;;;;4907:66;;-1:-1:-1;4907:66:90;;-1:-1:-1;4907:66:90;;-1:-1:-1;;;5018:15:90;;;;-1:-1:-1;;5018:74:90;;;;;;;;;;:15;:74;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;5018:74:90;;;;;;;;;-1:-1:-1;5018:74:90;-1:-1:-1;5148:21:90;5172:31;5198:4;5172:21;:10;5018:74;5172:14;:21::i;:31::-;5148:55;-1:-1:-1;;;;;;5221:26:90;;5213:62;;;;;-1:-1:-1;;;5213:62:90;;;;;;;;;;;;;;;;;;;;;;;;;;;;5292:9;:58;;5336:13;5328:22;;5292:58;;;5311:13;5292:58;5285:65;4506:851;-1:-1:-1;;;;;;;;;;;;;4506:851:90:o;2250:584::-;2356:5;;:30;;;-1:-1:-1;;;2356:30:90;;-1:-1:-1;;;;;2356:30:90;;;;;;;;;-1:-1:-1;;;;;;2356:5:90;;;:22;;:30;;;;;;;;;;;;;;;:5;:30;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;2356:30:90;-1:-1:-1;;;;;2419:32:90;;2396:20;2419:32;;;:24;2356:30;2419:32;;;;;2356:30;;-1:-1:-1;2356:30:90;2461:37;;2486:5;2493:1;2478:17;;;;;;;;2461:37;2535:5;;2528:33;;;-1:-1:-1;;;2528:33:90;;-1:-1:-1;;;;;2528:33:90;;;;;;;;;-1:-1:-1;;2535:5:90;;;;;2528:25;;:33;;;;;;;;;;;;;;;2535:5;2528:33;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;2528:33:90;;-1:-1:-1;2571:18:90;2592:24;;;:84;;2649:27;:9;2663:12;2649:13;:27::i;:::-;2592:84;;;2619:27;:12;2636:9;2619:16;:27::i;:::-;2571:105;-1:-1:-1;2686:13:90;2702:38;2727:12;2702:20;:4;2571:105;2702:8;:20::i;:38::-;2767:24;;;;;-1:-1:-1;2686:54:90;;-1:-1:-1;;;;2250:584:90;;;;:::o;2841:369::-;220:3:72;;-1:-1:-1;;;;;220:3:72;206:10;:17;198:51;;;;;-1:-1:-1;;;198:51:72;;;;;;;;;;;;-1:-1:-1;;;198:51:72;;;;;;;;;;;;;;;2970:22:90::1;::::0;::::1;;2969:23;2961:67;;;::::0;;-1:-1:-1;;;2961:67:90;;::::1;;::::0;::::1;::::0;::::1;::::0;;;;::::1;::::0;;;;;;;;;;;;;::::1;;3044:9;3039:126;3059:18:::0;;::::1;3039:126;;;3137:14;;3152:1;3137:17;;;;;;;;;;;;;3098:24;:36;3123:7;;3131:1;3123:10;;;;;;;;::::0;;::::1;::::0;;;::::1;;-1:-1:-1::0;;;;;3123:10:90::1;3098:36:::0;;-1:-1:-1;3098:36:90;::::1;::::0;;;;;;-1:-1:-1;3098:36:90;:56;-1:-1:-1;3079:3:90::1;3039:126;;;-1:-1:-1::0;;3174:22:90::1;:29:::0;;-1:-1:-1;;3174:29:90::1;3199:4;3174:29;::::0;;-1:-1:-1;;;2841:369:90:o;273:74:72:-;220:3;;-1:-1:-1;;;;;220:3:72;206:10;:17;198:51;;;;;-1:-1:-1;;;198:51:72;;;;;;;;;;;;-1:-1:-1;;;198:51:72;;;;;;;;;;;;;;;330:3:::1;:10:::0;;-1:-1:-1;;;;;;330:10:72::1;-1:-1:-1::0;;;;;330:10:72;;;::::1;::::0;;;::::1;::::0;;273:74::o;1413:831:90:-;786:10;776:21;;;;:9;:21;;;;;;;;768:58;;;;;-1:-1:-1;;;768:58:90;;;;;;;;;;;;;;;;;;;;;;;;;;;;1687:7:::1;:26;;;-1:-1:-1::0;1698:15:90;;1687:26:::1;1683:63;;;1729:7;;1683:63;1761:22;::::0;::::1;;1756:60;;1799:7;;1756:60;1827:23;1852:31:::0;1887:182:::1;1923:8;1945:16;1975:11;2000:10;2024;2048:11;1887:22;:182::i;:::-;1826:243;;;;2079:65;2107:11;2120:23;2079:27;:65::i;:::-;2160:77;::::0;;;;;::::1;::::0;::::1;::::0;;;;;-1:-1:-1;;;;;2160:77:90;::::1;::::0;::::1;::::0;;;;;;::::1;836:1;;;1413:831:::0;;;;;;;:::o;489:19::-;;;-1:-1:-1;;;;;489:19:90;;:::o;5889:1580::-;6053:4;;6525:26;;;6561:508;;;;6654:1;6639:12;:16;6635:383;;;6703:6;6687:12;6679:30;6675:247;;;6742:33;6750:12;6768:6;6742:25;:33::i;:::-;6733:42;;6809:5;6797:17;;6675:247;;;6870:33;:6;6889:12;6870:10;:33::i;:::-;6861:42;;6675:247;6635:383;;;6969:34;:6;6988:13;;;;6969:10;:34::i;:::-;6960:43;;6635:383;7040:9;-1:-1:-1;7051:6:90;;-1:-1:-1;7032:26:90;;6561:508;7098:1;7083:12;:16;7079:348;;;7124:33;:6;7143:12;7124:10;:33::i;:::-;7115:42;;7079:348;;;7217:6;7201:12;7200:13;;7192:31;7188:229;;;7252:34;7260:13;;;;7279:6;7252:26;:34::i;:::-;7243:43;;7316:4;7304:16;;7188:229;;;7368:34;:6;7387:13;;;;7368:10;:34::i;:::-;7359:43;;7188:229;7444:9;-1:-1:-1;7455:6:90;;-1:-1:-1;5889:1580:90;;;;;;;;:::o;874:176:123:-;932:7;963:5;;;986:6;;;;978:46;;;;;-1:-1:-1;;;978:46:123;;;;;;;;;;;;;;;;;;;;;;;;;;;;1042:1;-1:-1:-1;874:176:123;;;;;:::o;1321:134::-;1379:7;1405:43;1409:1;1412;1405:43;;;;;;;;;;;;;;;;;:3;:43::i;2180:459::-;2238:7;2479:6;2475:45;;-1:-1:-1;2508:1:123;2501:8;;2475:45;2542:5;;;2546:1;2542;:5;:1;2565:5;;;;;:10;2557:56;;;;-1:-1:-1;;;2557:56:123;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;3101:130;3159:7;3185:39;3189:1;3192;3185:39;;;;;;;;;;;;;;;;;:3;:39::i;1131:150:90:-;-1:-1:-1;;;;;1226:32:90;;;;;;;;:24;:32;;;;;:48;1131:150::o;1746:187:123:-;1832:7;1867:12;1859:6;;;;1851:29;;;;-1:-1:-1;;;1851:29:123;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;1851:29:123;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;1902:5:123;;;1746:187::o;3713:272::-;3799:7;3833:12;3826:5;3818:28;;;;-1:-1:-1;;;3818:28:123;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;3818:28:123;;;;;;;;;;;;;;;;;;3856:9;3872:1;3868;:5;;;;;;;3713:272;-1:-1:-1;;;;;3713:272:123:o","linkReferences":{}},"methodIdentifiers":{"MAX_INT256()":"122e7b07","_getNextGlobalAveragePrice(uint256,uint256,uint256,uint256,int256)":"5886b711","data(bytes32)":"0147fb0c","getGlobalShortDelta(address)":"b364accb","getNextGlobalShortData(address,address,address,uint256,uint256,bool)":"9cdeb593","getRealisedPnl(address,address,address,uint256,bool)":"a83b75fd","globalShortAveragePrices(address)":"62749803","gov()":"12d43a51","isGlobalShortDataReady()":"9a11178f","isHandler(address)":"46ea87af","setGov(address)":"cfad57a2","setHandler(address,bool)":"9cb7de4b","setInitData(address[],uint256[])":"bbd97187","setIsGlobalShortDataReady(bool)":"3d30cabf","updateGlobalShortData(address,address,address,bool,uint256,uint256,bool)":"f3238cec","vault()":"fbfa77cf"},"rawMetadata":"{\"compiler\":{\"version\":\"0.6.12+commit.27d51765\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_vault\",\"type\":\"address\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"globalShortSize\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"globalShortAveragePrice\",\"type\":\"uint256\"}],\"name\":\"GlobalShortDataUpdated\",\"type\":\"event\"},{\"inputs\":[],\"name\":\"MAX_INT256\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_averagePrice\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_nextPrice\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_nextSize\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_delta\",\"type\":\"uint256\"},{\"internalType\":\"int256\",\"name\":\"_realisedPnl\",\"type\":\"int256\"}],\"name\":\"_getNextGlobalAveragePrice\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"pure\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"name\":\"data\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_token\",\"type\":\"address\"}],\"name\":\"getGlobalShortDelta\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"},{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_account\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_collateralToken\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_indexToken\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"_nextPrice\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_sizeDelta\",\"type\":\"uint256\"},{\"internalType\":\"bool\",\"name\":\"_isIncrease\",\"type\":\"bool\"}],\"name\":\"getNextGlobalShortData\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_account\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_collateralToken\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_indexToken\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"_sizeDelta\",\"type\":\"uint256\"},{\"internalType\":\"bool\",\"name\":\"_isIncrease\",\"type\":\"bool\"}],\"name\":\"getRealisedPnl\",\"outputs\":[{\"internalType\":\"int256\",\"name\":\"\",\"type\":\"int256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"globalShortAveragePrices\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"gov\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"isGlobalShortDataReady\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"isHandler\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_gov\",\"type\":\"address\"}],\"name\":\"setGov\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_handler\",\"type\":\"address\"},{\"internalType\":\"bool\",\"name\":\"_isActive\",\"type\":\"bool\"}],\"name\":\"setHandler\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address[]\",\"name\":\"_tokens\",\"type\":\"address[]\"},{\"internalType\":\"uint256[]\",\"name\":\"_averagePrices\",\"type\":\"uint256[]\"}],\"name\":\"setInitData\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bool\",\"name\":\"value\",\"type\":\"bool\"}],\"name\":\"setIsGlobalShortDataReady\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_account\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_collateralToken\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_indexToken\",\"type\":\"address\"},{\"internalType\":\"bool\",\"name\":\"_isLong\",\"type\":\"bool\"},{\"internalType\":\"uint256\",\"name\":\"_sizeDelta\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_markPrice\",\"type\":\"uint256\"},{\"internalType\":\"bool\",\"name\":\"_isIncrease\",\"type\":\"bool\"}],\"name\":\"updateGlobalShortData\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"vault\",\"outputs\":[{\"internalType\":\"contract IVault\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"}],\"devdoc\":{\"kind\":\"dev\",\"methods\":{},\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"version\":1}},\"settings\":{\"compilationTarget\":{\"src/core/ShortsTracker.sol\":\"ShortsTracker\"},\"evmVersion\":\"istanbul\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[\":forge-std/=lib/forge-std/src/\"]},\"sources\":{\"src/access/Governable.sol\":{\"keccak256\":\"0xe719b0de64ee00468f6a985c8ef08ebdd271d99d6616308cbba458f78ed8c532\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://5e35e6a5998b70a68666c4312f272b8c59b544cc2675b5b0f0e4eb44cab3c2a5\",\"dweb:/ipfs/Qmcnz6ALbcwe6mvXSKmPwSZ5YEJ83mGgzZY5t7G1voard2\"]},\"src/core/ShortsTracker.sol\":{\"keccak256\":\"0xfcdce594f23c69d7a5cb6b114844272d051643436ca380e99d4ff5874d9bae4b\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://82346a364f6ae462f2254edfd1577a15dd9e840b64dfa643b0795ed66031110c\",\"dweb:/ipfs/QmU45QHqF5CHpwNLHcv3f8yQEydzUE4k84ArSjgtHXEZbc\"]},\"src/core/interfaces/IShortsTracker.sol\":{\"keccak256\":\"0x7b3f7791cba4f3ccfa308a9bf176663e9cead74bf78ac1c7ae9f2a041a26075d\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://bafe0fb93ccf2e7f69fb8e454bc956eb1e2d51bbcd870ea23ff2b49b11803ca2\",\"dweb:/ipfs/Qme67ZZvf7CnQF7yHrrhLwVCMsaquAmGHqpAad5WigkBmy\"]},\"src/core/interfaces/IVault.sol\":{\"keccak256\":\"0x247067b8f88636424e799a2b72b81884273813e62ad3bfedf428e0fb97714637\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://83c301eb0d450ac80caa764c552ee8dca8a95fc85d35826f11b7a641b4ed4bba\",\"dweb:/ipfs/QmPBkcPd9ZWF1oZjBL1YaMYemdHj1X4MhxFGUe3kBcbc23\"]},\"src/core/interfaces/IVaultUtils.sol\":{\"keccak256\":\"0xc8cad694c33f968559eb3feac2226fe26d81d457529b87ae8852390e1474d7be\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://0d70a8154a4304de6d6f56da9aa07584c8c28cd957502e78007c6698e3563595\",\"dweb:/ipfs/QmcTcvedKYRarxnPbt8vy72itkW7DjPYehAFrFWPDSGEAH\"]},\"src/libraries/math/SafeMath.sol\":{\"keccak256\":\"0x41b0da7db3e1f79b338824fed2bc4732430b78002a9d51c2cfa86ad5a12c2763\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://d0da1c7fdf32ad0225980c821ec44eddb0a068dadbd60bb8e987dcff7cfc57fb\",\"dweb:/ipfs/QmYC9SQk4HQTi5MjRtGAFC1q4qrV44JaQk1XTtvqrciefR\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.6.12+commit.27d51765"},"language":"Solidity","output":{"abi":[{"inputs":[{"internalType":"address","name":"_vault","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[{"internalType":"address","name":"token","type":"address","indexed":true},{"internalType":"uint256","name":"globalShortSize","type":"uint256","indexed":false},{"internalType":"uint256","name":"globalShortAveragePrice","type":"uint256","indexed":false}],"type":"event","name":"GlobalShortDataUpdated","anonymous":false},{"inputs":[],"stateMutability":"view","type":"function","name":"MAX_INT256","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[{"internalType":"uint256","name":"_averagePrice","type":"uint256"},{"internalType":"uint256","name":"_nextPrice","type":"uint256"},{"internalType":"uint256","name":"_nextSize","type":"uint256"},{"internalType":"uint256","name":"_delta","type":"uint256"},{"internalType":"int256","name":"_realisedPnl","type":"int256"}],"stateMutability":"pure","type":"function","name":"_getNextGlobalAveragePrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function","name":"data","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}]},{"inputs":[{"internalType":"address","name":"_token","type":"address"}],"stateMutability":"view","type":"function","name":"getGlobalShortDelta","outputs":[{"internalType":"bool","name":"","type":"bool"},{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[{"internalType":"address","name":"_account","type":"address"},{"internalType":"address","name":"_collateralToken","type":"address"},{"internalType":"address","name":"_indexToken","type":"address"},{"internalType":"uint256","name":"_nextPrice","type":"uint256"},{"internalType":"uint256","name":"_sizeDelta","type":"uint256"},{"internalType":"bool","name":"_isIncrease","type":"bool"}],"stateMutability":"view","type":"function","name":"getNextGlobalShortData","outputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[{"internalType":"address","name":"_account","type":"address"},{"internalType":"address","name":"_collateralToken","type":"address"},{"internalType":"address","name":"_indexToken","type":"address"},{"internalType":"uint256","name":"_sizeDelta","type":"uint256"},{"internalType":"bool","name":"_isIncrease","type":"bool"}],"stateMutability":"view","type":"function","name":"getRealisedPnl","outputs":[{"internalType":"int256","name":"","type":"int256"}]},{"inputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function","name":"globalShortAveragePrices","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"gov","outputs":[{"internalType":"address","name":"","type":"address"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"isGlobalShortDataReady","outputs":[{"internalType":"bool","name":"","type":"bool"}]},{"inputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function","name":"isHandler","outputs":[{"internalType":"bool","name":"","type":"bool"}]},{"inputs":[{"internalType":"address","name":"_gov","type":"address"}],"stateMutability":"nonpayable","type":"function","name":"setGov"},{"inputs":[{"internalType":"address","name":"_handler","type":"address"},{"internalType":"bool","name":"_isActive","type":"bool"}],"stateMutability":"nonpayable","type":"function","name":"setHandler"},{"inputs":[{"internalType":"address[]","name":"_tokens","type":"address[]"},{"internalType":"uint256[]","name":"_averagePrices","type":"uint256[]"}],"stateMutability":"nonpayable","type":"function","name":"setInitData"},{"inputs":[{"internalType":"bool","name":"value","type":"bool"}],"stateMutability":"nonpayable","type":"function","name":"setIsGlobalShortDataReady"},{"inputs":[{"internalType":"address","name":"_account","type":"address"},{"internalType":"address","name":"_collateralToken","type":"address"},{"internalType":"address","name":"_indexToken","type":"address"},{"internalType":"bool","name":"_isLong","type":"bool"},{"internalType":"uint256","name":"_sizeDelta","type":"uint256"},{"internalType":"uint256","name":"_markPrice","type":"uint256"},{"internalType":"bool","name":"_isIncrease","type":"bool"}],"stateMutability":"nonpayable","type":"function","name":"updateGlobalShortData"},{"inputs":[],"stateMutability":"view","type":"function","name":"vault","outputs":[{"internalType":"contract IVault","name":"","type":"address"}]}],"devdoc":{"kind":"dev","methods":{},"version":1},"userdoc":{"kind":"user","methods":{},"version":1}},"settings":{"remappings":["forge-std/=lib/forge-std/src/"],"optimizer":{"enabled":true,"runs":200},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"src/core/ShortsTracker.sol":"ShortsTracker"},"evmVersion":"istanbul","libraries":{}},"sources":{"src/access/Governable.sol":{"keccak256":"0xe719b0de64ee00468f6a985c8ef08ebdd271d99d6616308cbba458f78ed8c532","urls":["bzz-raw://5e35e6a5998b70a68666c4312f272b8c59b544cc2675b5b0f0e4eb44cab3c2a5","dweb:/ipfs/Qmcnz6ALbcwe6mvXSKmPwSZ5YEJ83mGgzZY5t7G1voard2"],"license":"MIT"},"src/core/ShortsTracker.sol":{"keccak256":"0xfcdce594f23c69d7a5cb6b114844272d051643436ca380e99d4ff5874d9bae4b","urls":["bzz-raw://82346a364f6ae462f2254edfd1577a15dd9e840b64dfa643b0795ed66031110c","dweb:/ipfs/QmU45QHqF5CHpwNLHcv3f8yQEydzUE4k84ArSjgtHXEZbc"],"license":"MIT"},"src/core/interfaces/IShortsTracker.sol":{"keccak256":"0x7b3f7791cba4f3ccfa308a9bf176663e9cead74bf78ac1c7ae9f2a041a26075d","urls":["bzz-raw://bafe0fb93ccf2e7f69fb8e454bc956eb1e2d51bbcd870ea23ff2b49b11803ca2","dweb:/ipfs/Qme67ZZvf7CnQF7yHrrhLwVCMsaquAmGHqpAad5WigkBmy"],"license":"MIT"},"src/core/interfaces/IVault.sol":{"keccak256":"0x247067b8f88636424e799a2b72b81884273813e62ad3bfedf428e0fb97714637","urls":["bzz-raw://83c301eb0d450ac80caa764c552ee8dca8a95fc85d35826f11b7a641b4ed4bba","dweb:/ipfs/QmPBkcPd9ZWF1oZjBL1YaMYemdHj1X4MhxFGUe3kBcbc23"],"license":"MIT"},"src/core/interfaces/IVaultUtils.sol":{"keccak256":"0xc8cad694c33f968559eb3feac2226fe26d81d457529b87ae8852390e1474d7be","urls":["bzz-raw://0d70a8154a4304de6d6f56da9aa07584c8c28cd957502e78007c6698e3563595","dweb:/ipfs/QmcTcvedKYRarxnPbt8vy72itkW7DjPYehAFrFWPDSGEAH"],"license":"MIT"},"src/libraries/math/SafeMath.sol":{"keccak256":"0x41b0da7db3e1f79b338824fed2bc4732430b78002a9d51c2cfa86ad5a12c2763","urls":["bzz-raw://d0da1c7fdf32ad0225980c821ec44eddb0a068dadbd60bb8e987dcff7cfc57fb","dweb:/ipfs/QmYC9SQk4HQTi5MjRtGAFC1q4qrV44JaQk1XTtvqrciefR"],"license":"MIT"}},"version":1},"ast":{"absolutePath":"src/core/ShortsTracker.sol","id":65438,"exportedSymbols":{"ShortsTracker":[65437]},"nodeType":"SourceUnit","src":"33:7439:90","nodes":[{"id":64747,"nodeType":"PragmaDirective","src":"33:23:90","nodes":[],"literals":["solidity","0.6",".12"]},{"id":64748,"nodeType":"ImportDirective","src":"58:40:90","nodes":[],"absolutePath":"src/libraries/math/SafeMath.sol","file":"../libraries/math/SafeMath.sol","scope":65438,"sourceUnit":77560,"symbolAliases":[],"unitAlias":""},{"id":64749,"nodeType":"ImportDirective","src":"100:34:90","nodes":[],"absolutePath":"src/access/Governable.sol","file":"../access/Governable.sol","scope":65438,"sourceUnit":53772,"symbolAliases":[],"unitAlias":""},{"id":64750,"nodeType":"ImportDirective","src":"135:41:90","nodes":[],"absolutePath":"src/core/interfaces/IShortsTracker.sol","file":"./interfaces/IShortsTracker.sol","scope":65438,"sourceUnit":72828,"symbolAliases":[],"unitAlias":""},{"id":64751,"nodeType":"ImportDirective","src":"177:33:90","nodes":[],"absolutePath":"src/core/interfaces/IVault.sol","file":"./interfaces/IVault.sol","scope":65438,"sourceUnit":73464,"symbolAliases":[],"unitAlias":""},{"id":65437,"nodeType":"ContractDefinition","src":"212:7259:90","nodes":[{"id":64758,"nodeType":"UsingForDirective","src":"271:27:90","nodes":[],"libraryName":{"contractScope":null,"id":64756,"name":"SafeMath","nodeType":"UserDefinedTypeName","referencedDeclaration":77559,"src":"277:8:90","typeDescriptions":{"typeIdentifier":"t_contract$_SafeMath_$77559","typeString":"library SafeMath"}},"typeName":{"id":64757,"name":"uint256","nodeType":"ElementaryTypeName","src":"290:7:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}},{"id":64766,"nodeType":"EventDefinition","src":"304:110:90","nodes":[],"anonymous":false,"documentation":null,"name":"GlobalShortDataUpdated","parameters":{"id":64765,"nodeType":"ParameterList","parameters":[{"constant":false,"id":64760,"indexed":true,"mutability":"mutable","name":"token","nodeType":"VariableDeclaration","overrides":null,"scope":64766,"src":"333:21:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":64759,"name":"address","nodeType":"ElementaryTypeName","src":"333:7:90","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"value":null,"visibility":"internal"},{"constant":false,"id":64762,"indexed":false,"mutability":"mutable","name":"globalShortSize","nodeType":"VariableDeclaration","overrides":null,"scope":64766,"src":"356:23:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":64761,"name":"uint256","nodeType":"ElementaryTypeName","src":"356:7:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"},{"constant":false,"id":64764,"indexed":false,"mutability":"mutable","name":"globalShortAveragePrice","nodeType":"VariableDeclaration","overrides":null,"scope":64766,"src":"381:31:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":64763,"name":"uint256","nodeType":"ElementaryTypeName","src":"381:7:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"}],"src":"332:81:90"}},{"id":64776,"nodeType":"VariableDeclaration","src":"420:62:90","nodes":[],"constant":true,"functionSelector":"122e7b07","mutability":"constant","name":"MAX_INT256","overrides":null,"scope":65437,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":64767,"name":"uint256","nodeType":"ElementaryTypeName","src":"420:7:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":64772,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"470:6:90","typeDescriptions":{"typeIdentifier":"t_type$_t_int256_$","typeString":"type(int256)"},"typeName":{"id":64771,"name":"int256","nodeType":"ElementaryTypeName","src":"470:6:90","typeDescriptions":{"typeIdentifier":null,"typeString":null}}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_type$_t_int256_$","typeString":"type(int256)"}],"id":64770,"name":"type","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-27,"src":"465:4:90","typeDescriptions":{"typeIdentifier":"t_function_metatype_pure$__$returns$__$","typeString":"function () pure"}},"id":64773,"isConstant":false,"isLValue":false,"isPure":true,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"465:12:90","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_magic_meta_type_t_int256","typeString":"type(int256)"}},"id":64774,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberName":"max","nodeType":"MemberAccess","referencedDeclaration":null,"src":"465:16:90","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_int256","typeString":"int256"}],"id":64769,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"457:7:90","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":64768,"name":"uint256","nodeType":"ElementaryTypeName","src":"457:7:90","typeDescriptions":{"typeIdentifier":null,"typeString":null}}},"id":64775,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"457:25:90","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"public"},{"id":64778,"nodeType":"VariableDeclaration","src":"489:19:90","nodes":[],"constant":false,"functionSelector":"fbfa77cf","mutability":"mutable","name":"vault","overrides":null,"scope":65437,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_contract$_IVault_$73463","typeString":"contract IVault"},"typeName":{"contractScope":null,"id":64777,"name":"IVault","nodeType":"UserDefinedTypeName","referencedDeclaration":73463,"src":"489:6:90","typeDescriptions":{"typeIdentifier":"t_contract$_IVault_$73463","typeString":"contract IVault"}},"value":null,"visibility":"public"},{"id":64782,"nodeType":"VariableDeclaration","src":"515:42:90","nodes":[],"constant":false,"functionSelector":"46ea87af","mutability":"mutable","name":"isHandler","overrides":null,"scope":65437,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_bool_$","typeString":"mapping(address => bool)"},"typeName":{"id":64781,"keyType":{"id":64779,"name":"address","nodeType":"ElementaryTypeName","src":"524:7:90","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"Mapping","src":"515:25:90","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_bool_$","typeString":"mapping(address => bool)"},"valueType":{"id":64780,"name":"bool","nodeType":"ElementaryTypeName","src":"535:4:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}}},"value":null,"visibility":"public"},{"id":64786,"nodeType":"VariableDeclaration","src":"563:40:90","nodes":[],"constant":false,"functionSelector":"0147fb0c","mutability":"mutable","name":"data","overrides":null,"scope":65437,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_mapping$_t_bytes32_$_t_bytes32_$","typeString":"mapping(bytes32 => bytes32)"},"typeName":{"id":64785,"keyType":{"id":64783,"name":"bytes32","nodeType":"ElementaryTypeName","src":"572:7:90","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"nodeType":"Mapping","src":"563:28:90","typeDescriptions":{"typeIdentifier":"t_mapping$_t_bytes32_$_t_bytes32_$","typeString":"mapping(bytes32 => bytes32)"},"valueType":{"id":64784,"name":"bytes32","nodeType":"ElementaryTypeName","src":"583:7:90","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}},"value":null,"visibility":"public"},{"id":64791,"nodeType":"VariableDeclaration","src":"610:69:90","nodes":[],"baseFunctions":[72776],"constant":false,"functionSelector":"62749803","mutability":"mutable","name":"globalShortAveragePrices","overrides":{"id":64790,"nodeType":"OverrideSpecifier","overrides":[],"src":"639:8:90"},"scope":65437,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_uint256_$","typeString":"mapping(address => uint256)"},"typeName":{"id":64789,"keyType":{"id":64787,"name":"address","nodeType":"ElementaryTypeName","src":"619:7:90","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"Mapping","src":"610:28:90","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_uint256_$","typeString":"mapping(address => uint256)"},"valueType":{"id":64788,"name":"uint256","nodeType":"ElementaryTypeName","src":"630:7:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}},"value":null,"visibility":"public"},{"id":64794,"nodeType":"VariableDeclaration","src":"685:43:90","nodes":[],"baseFunctions":[72769],"constant":false,"functionSelector":"9a11178f","mutability":"mutable","name":"isGlobalShortDataReady","overrides":{"id":64793,"nodeType":"OverrideSpecifier","overrides":[],"src":"690:8:90"},"scope":65437,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":64792,"name":"bool","nodeType":"ElementaryTypeName","src":"685:4:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"value":null,"visibility":"public"},{"id":64806,"nodeType":"ModifierDefinition","src":"735:109:90","nodes":[],"body":{"id":64805,"nodeType":"Block","src":"758:86:90","nodes":[],"statements":[{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"baseExpression":{"argumentTypes":null,"id":64797,"name":"isHandler","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64782,"src":"776:9:90","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_bool_$","typeString":"mapping(address => bool)"}},"id":64800,"indexExpression":{"argumentTypes":null,"expression":{"argumentTypes":null,"id":64798,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-15,"src":"786:3:90","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":64799,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"sender","nodeType":"MemberAccess","referencedDeclaration":null,"src":"786:10:90","typeDescriptions":{"typeIdentifier":"t_address_payable","typeString":"address payable"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"776:21:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"argumentTypes":null,"hexValue":"53686f727473547261636b65723a20666f7262696464656e","id":64801,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"799:26:90","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_stringliteral_7841260a376f5abeafe75eea1182f8babe69f41587d009b45687048fd0516c7b","typeString":"literal_string \"ShortsTracker: forbidden\""},"value":"ShortsTracker: forbidden"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_7841260a376f5abeafe75eea1182f8babe69f41587d009b45687048fd0516c7b","typeString":"literal_string \"ShortsTracker: forbidden\""}],"id":64796,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18],"referencedDeclaration":-18,"src":"768:7:90","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":64802,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"768:58:90","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":64803,"nodeType":"ExpressionStatement","src":"768:58:90"},{"id":64804,"nodeType":"PlaceholderStatement","src":"836:1:90"}]},"documentation":null,"name":"onlyHandler","overrides":null,"parameters":{"id":64795,"nodeType":"ParameterList","parameters":[],"src":"755:2:90"},"virtual":false,"visibility":"internal"},{"id":64818,"nodeType":"FunctionDefinition","src":"850:74:90","nodes":[],"body":{"id":64817,"nodeType":"Block","src":"885:39:90","nodes":[],"statements":[{"expression":{"argumentTypes":null,"id":64815,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"id":64811,"name":"vault","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64778,"src":"895:5:90","typeDescriptions":{"typeIdentifier":"t_contract$_IVault_$73463","typeString":"contract IVault"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":64813,"name":"_vault","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64808,"src":"910:6:90","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":64812,"name":"IVault","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":73463,"src":"903:6:90","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IVault_$73463_$","typeString":"type(contract IVault)"}},"id":64814,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"903:14:90","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IVault_$73463","typeString":"contract IVault"}},"src":"895:22:90","typeDescriptions":{"typeIdentifier":"t_contract$_IVault_$73463","typeString":"contract IVault"}},"id":64816,"nodeType":"ExpressionStatement","src":"895:22:90"}]},"documentation":null,"implemented":true,"kind":"constructor","modifiers":[],"name":"","overrides":null,"parameters":{"id":64809,"nodeType":"ParameterList","parameters":[{"constant":false,"id":64808,"mutability":"mutable","name":"_vault","nodeType":"VariableDeclaration","overrides":null,"scope":64818,"src":"862:14:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":64807,"name":"address","nodeType":"ElementaryTypeName","src":"862:7:90","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"value":null,"visibility":"internal"}],"src":"861:16:90"},"returnParameters":{"id":64810,"nodeType":"ParameterList","parameters":[],"src":"885:0:90"},"scope":65437,"stateMutability":"nonpayable","virtual":false,"visibility":"public"},{"id":64844,"nodeType":"FunctionDefinition","src":"930:195:90","nodes":[],"body":{"id":64843,"nodeType":"Block","src":"1001:124:90","nodes":[],"statements":[{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":64833,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"id":64828,"name":"_handler","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64820,"src":"1019:8:90","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"hexValue":"30","id":64831,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1039:1:90","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":64830,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"1031:7:90","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":64829,"name":"address","nodeType":"ElementaryTypeName","src":"1031:7:90","typeDescriptions":{"typeIdentifier":null,"typeString":null}}},"id":64832,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"1031:10:90","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address_payable","typeString":"address payable"}},"src":"1019:22:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"argumentTypes":null,"hexValue":"53686f727473547261636b65723a20696e76616c6964205f68616e646c6572","id":64834,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"1043:33:90","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_stringliteral_17919eb097482d24b61aeae25aa89ecb89790fee6507ccc2d060b9f43de60e2f","typeString":"literal_string \"ShortsTracker: invalid _handler\""},"value":"ShortsTracker: invalid _handler"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_17919eb097482d24b61aeae25aa89ecb89790fee6507ccc2d060b9f43de60e2f","typeString":"literal_string \"ShortsTracker: invalid _handler\""}],"id":64827,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18],"referencedDeclaration":-18,"src":"1011:7:90","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":64835,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"1011:66:90","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":64836,"nodeType":"ExpressionStatement","src":"1011:66:90"},{"expression":{"argumentTypes":null,"id":64841,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"baseExpression":{"argumentTypes":null,"id":64837,"name":"isHandler","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64782,"src":"1087:9:90","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_bool_$","typeString":"mapping(address => bool)"}},"id":64839,"indexExpression":{"argumentTypes":null,"id":64838,"name":"_handler","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64820,"src":"1097:8:90","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"nodeType":"IndexAccess","src":"1087:19:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"id":64840,"name":"_isActive","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64822,"src":"1109:9:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"1087:31:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":64842,"nodeType":"ExpressionStatement","src":"1087:31:90"}]},"documentation":null,"functionSelector":"9cb7de4b","implemented":true,"kind":"function","modifiers":[{"arguments":null,"id":64825,"modifierName":{"argumentTypes":null,"id":64824,"name":"onlyGov","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":53758,"src":"993:7:90","typeDescriptions":{"typeIdentifier":"t_modifier$__$","typeString":"modifier ()"}},"nodeType":"ModifierInvocation","src":"993:7:90"}],"name":"setHandler","overrides":null,"parameters":{"id":64823,"nodeType":"ParameterList","parameters":[{"constant":false,"id":64820,"mutability":"mutable","name":"_handler","nodeType":"VariableDeclaration","overrides":null,"scope":64844,"src":"950:16:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":64819,"name":"address","nodeType":"ElementaryTypeName","src":"950:7:90","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"value":null,"visibility":"internal"},{"constant":false,"id":64822,"mutability":"mutable","name":"_isActive","nodeType":"VariableDeclaration","overrides":null,"scope":64844,"src":"968:14:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":64821,"name":"bool","nodeType":"ElementaryTypeName","src":"968:4:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"value":null,"visibility":"internal"}],"src":"949:34:90"},"returnParameters":{"id":64826,"nodeType":"ParameterList","parameters":[],"src":"1001:0:90"},"scope":65437,"stateMutability":"nonpayable","virtual":false,"visibility":"external"},{"id":64858,"nodeType":"FunctionDefinition","src":"1131:150:90","nodes":[],"body":{"id":64857,"nodeType":"Block","src":"1216:65:90","nodes":[],"statements":[{"expression":{"argumentTypes":null,"id":64855,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"baseExpression":{"argumentTypes":null,"id":64851,"name":"globalShortAveragePrices","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64791,"src":"1226:24:90","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_uint256_$","typeString":"mapping(address => uint256)"}},"id":64853,"indexExpression":{"argumentTypes":null,"id":64852,"name":"_token","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64846,"src":"1251:6:90","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"nodeType":"IndexAccess","src":"1226:32:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"id":64854,"name":"_averagePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64848,"src":"1261:13:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"1226:48:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":64856,"nodeType":"ExpressionStatement","src":"1226:48:90"}]},"documentation":null,"implemented":true,"kind":"function","modifiers":[],"name":"_setGlobalShortAveragePrice","overrides":null,"parameters":{"id":64849,"nodeType":"ParameterList","parameters":[{"constant":false,"id":64846,"mutability":"mutable","name":"_token","nodeType":"VariableDeclaration","overrides":null,"scope":64858,"src":"1168:14:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":64845,"name":"address","nodeType":"ElementaryTypeName","src":"1168:7:90","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"value":null,"visibility":"internal"},{"constant":false,"id":64848,"mutability":"mutable","name":"_averagePrice","nodeType":"VariableDeclaration","overrides":null,"scope":64858,"src":"1184:21:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":64847,"name":"uint256","nodeType":"ElementaryTypeName","src":"1184:7:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"}],"src":"1167:39:90"},"returnParameters":{"id":64850,"nodeType":"ParameterList","parameters":[],"src":"1216:0:90"},"scope":65437,"stateMutability":"nonpayable","virtual":false,"visibility":"internal"},{"id":64871,"nodeType":"FunctionDefinition","src":"1287:120:90","nodes":[],"body":{"id":64870,"nodeType":"Block","src":"1360:47:90","nodes":[],"statements":[{"expression":{"argumentTypes":null,"id":64868,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"id":64866,"name":"isGlobalShortDataReady","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64794,"src":"1370:22:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"id":64867,"name":"value","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64860,"src":"1395:5:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"1370:30:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":64869,"nodeType":"ExpressionStatement","src":"1370:30:90"}]},"baseFunctions":[72817],"documentation":null,"functionSelector":"3d30cabf","implemented":true,"kind":"function","modifiers":[{"arguments":null,"id":64864,"modifierName":{"argumentTypes":null,"id":64863,"name":"onlyGov","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":53758,"src":"1352:7:90","typeDescriptions":{"typeIdentifier":"t_modifier$__$","typeString":"modifier ()"}},"nodeType":"ModifierInvocation","src":"1352:7:90"}],"name":"setIsGlobalShortDataReady","overrides":{"id":64862,"nodeType":"OverrideSpecifier","overrides":[],"src":"1334:8:90"},"parameters":{"id":64861,"nodeType":"ParameterList","parameters":[{"constant":false,"id":64860,"mutability":"mutable","name":"value","nodeType":"VariableDeclaration","overrides":null,"scope":64871,"src":"1322:10:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":64859,"name":"bool","nodeType":"ElementaryTypeName","src":"1322:4:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"value":null,"visibility":"internal"}],"src":"1321:12:90"},"returnParameters":{"id":64865,"nodeType":"ParameterList","parameters":[],"src":"1360:0:90"},"scope":65437,"stateMutability":"nonpayable","virtual":false,"visibility":"external"},{"id":64929,"nodeType":"FunctionDefinition","src":"1413:831:90","nodes":[],"body":{"id":64928,"nodeType":"Block","src":"1673:571:90","nodes":[],"statements":[{"condition":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_bool","typeString":"bool"},"id":64895,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"id":64891,"name":"_isLong","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64879,"src":"1687:7:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"BinaryOperation","operator":"||","rightExpression":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":64894,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"id":64892,"name":"_sizeDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64881,"src":"1698:10:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"argumentTypes":null,"hexValue":"30","id":64893,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1712:1:90","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"1698:15:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"1687:26:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":null,"id":64898,"nodeType":"IfStatement","src":"1683:63:90","trueBody":{"id":64897,"nodeType":"Block","src":"1715:31:90","statements":[{"expression":null,"functionReturnParameters":64890,"id":64896,"nodeType":"Return","src":"1729:7:90"}]}},{"condition":{"argumentTypes":null,"id":64900,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"!","prefix":true,"src":"1760:23:90","subExpression":{"argumentTypes":null,"id":64899,"name":"isGlobalShortDataReady","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64794,"src":"1761:22:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":null,"id":64903,"nodeType":"IfStatement","src":"1756:60:90","trueBody":{"id":64902,"nodeType":"Block","src":"1785:31:90","statements":[{"expression":null,"functionReturnParameters":64890,"id":64901,"nodeType":"Return","src":"1799:7:90"}]}},{"assignments":[64905,64907],"declarations":[{"constant":false,"id":64905,"mutability":"mutable","name":"globalShortSize","nodeType":"VariableDeclaration","overrides":null,"scope":64928,"src":"1827:23:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":64904,"name":"uint256","nodeType":"ElementaryTypeName","src":"1827:7:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"},{"constant":false,"id":64907,"mutability":"mutable","name":"globalShortAveragePrice","nodeType":"VariableDeclaration","overrides":null,"scope":64928,"src":"1852:31:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":64906,"name":"uint256","nodeType":"ElementaryTypeName","src":"1852:7:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"}],"id":64916,"initialValue":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":64909,"name":"_account","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64873,"src":"1923:8:90","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"id":64910,"name":"_collateralToken","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64875,"src":"1945:16:90","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"id":64911,"name":"_indexToken","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64877,"src":"1975:11:90","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"id":64912,"name":"_markPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64883,"src":"2000:10:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"argumentTypes":null,"id":64913,"name":"_sizeDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64881,"src":"2024:10:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"argumentTypes":null,"id":64914,"name":"_isIncrease","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64885,"src":"2048:11:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_bool","typeString":"bool"}],"id":64908,"name":"getNextGlobalShortData","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65172,"src":"1887:22:90","typeDescriptions":{"typeIdentifier":"t_function_internal_view$_t_address_$_t_address_$_t_address_$_t_uint256_$_t_uint256_$_t_bool_$returns$_t_uint256_$_t_uint256_$","typeString":"function (address,address,address,uint256,uint256,bool) view returns (uint256,uint256)"}},"id":64915,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"1887:182:90","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$_t_uint256_$_t_uint256_$","typeString":"tuple(uint256,uint256)"}},"nodeType":"VariableDeclarationStatement","src":"1826:243:90"},{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":64918,"name":"_indexToken","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64877,"src":"2107:11:90","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"id":64919,"name":"globalShortAveragePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64907,"src":"2120:23:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":64917,"name":"_setGlobalShortAveragePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64858,"src":"2079:27:90","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_address_$_t_uint256_$returns$__$","typeString":"function (address,uint256)"}},"id":64920,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"2079:65:90","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":64921,"nodeType":"ExpressionStatement","src":"2079:65:90"},{"eventCall":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":64923,"name":"_indexToken","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64877,"src":"2183:11:90","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"id":64924,"name":"globalShortSize","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64905,"src":"2196:15:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"argumentTypes":null,"id":64925,"name":"globalShortAveragePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64907,"src":"2213:23:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":64922,"name":"GlobalShortDataUpdated","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64766,"src":"2160:22:90","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_address_$_t_uint256_$_t_uint256_$returns$__$","typeString":"function (address,uint256,uint256)"}},"id":64926,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"2160:77:90","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":64927,"nodeType":"EmitStatement","src":"2155:82:90"}]},"baseFunctions":[72812],"documentation":null,"functionSelector":"f3238cec","implemented":true,"kind":"function","modifiers":[{"arguments":null,"id":64889,"modifierName":{"argumentTypes":null,"id":64888,"name":"onlyHandler","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64806,"src":"1661:11:90","typeDescriptions":{"typeIdentifier":"t_modifier$__$","typeString":"modifier ()"}},"nodeType":"ModifierInvocation","src":"1661:11:90"}],"name":"updateGlobalShortData","overrides":{"id":64887,"nodeType":"OverrideSpecifier","overrides":[],"src":"1643:8:90"},"parameters":{"id":64886,"nodeType":"ParameterList","parameters":[{"constant":false,"id":64873,"mutability":"mutable","name":"_account","nodeType":"VariableDeclaration","overrides":null,"scope":64929,"src":"1453:16:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":64872,"name":"address","nodeType":"ElementaryTypeName","src":"1453:7:90","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"value":null,"visibility":"internal"},{"constant":false,"id":64875,"mutability":"mutable","name":"_collateralToken","nodeType":"VariableDeclaration","overrides":null,"scope":64929,"src":"1479:24:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":64874,"name":"address","nodeType":"ElementaryTypeName","src":"1479:7:90","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"value":null,"visibility":"internal"},{"constant":false,"id":64877,"mutability":"mutable","name":"_indexToken","nodeType":"VariableDeclaration","overrides":null,"scope":64929,"src":"1513:19:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":64876,"name":"address","nodeType":"ElementaryTypeName","src":"1513:7:90","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"value":null,"visibility":"internal"},{"constant":false,"id":64879,"mutability":"mutable","name":"_isLong","nodeType":"VariableDeclaration","overrides":null,"scope":64929,"src":"1542:12:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":64878,"name":"bool","nodeType":"ElementaryTypeName","src":"1542:4:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"value":null,"visibility":"internal"},{"constant":false,"id":64881,"mutability":"mutable","name":"_sizeDelta","nodeType":"VariableDeclaration","overrides":null,"scope":64929,"src":"1564:18:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":64880,"name":"uint256","nodeType":"ElementaryTypeName","src":"1564:7:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"},{"constant":false,"id":64883,"mutability":"mutable","name":"_markPrice","nodeType":"VariableDeclaration","overrides":null,"scope":64929,"src":"1592:18:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":64882,"name":"uint256","nodeType":"ElementaryTypeName","src":"1592:7:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"},{"constant":false,"id":64885,"mutability":"mutable","name":"_isIncrease","nodeType":"VariableDeclaration","overrides":null,"scope":64929,"src":"1620:16:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":64884,"name":"bool","nodeType":"ElementaryTypeName","src":"1620:4:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"value":null,"visibility":"internal"}],"src":"1443:199:90"},"returnParameters":{"id":64890,"nodeType":"ParameterList","parameters":[],"src":"1673:0:90"},"scope":65437,"stateMutability":"nonpayable","virtual":false,"visibility":"external"},{"id":65005,"nodeType":"FunctionDefinition","src":"2250:584:90","nodes":[],"body":{"id":65004,"nodeType":"Block","src":"2331:503:90","nodes":[],"statements":[{"assignments":[64939],"declarations":[{"constant":false,"id":64939,"mutability":"mutable","name":"size","nodeType":"VariableDeclaration","overrides":null,"scope":65004,"src":"2341:12:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":64938,"name":"uint256","nodeType":"ElementaryTypeName","src":"2341:7:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"}],"id":64944,"initialValue":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":64942,"name":"_token","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64931,"src":"2379:6:90","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"expression":{"argumentTypes":null,"id":64940,"name":"vault","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64778,"src":"2356:5:90","typeDescriptions":{"typeIdentifier":"t_contract$_IVault_$73463","typeString":"contract IVault"}},"id":64941,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"globalShortSizes","nodeType":"MemberAccess","referencedDeclaration":73325,"src":"2356:22:90","typeDescriptions":{"typeIdentifier":"t_function_external_view$_t_address_$returns$_t_uint256_$","typeString":"function (address) view external returns (uint256)"}},"id":64943,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"2356:30:90","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"2341:45:90"},{"assignments":[64946],"declarations":[{"constant":false,"id":64946,"mutability":"mutable","name":"averagePrice","nodeType":"VariableDeclaration","overrides":null,"scope":65004,"src":"2396:20:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":64945,"name":"uint256","nodeType":"ElementaryTypeName","src":"2396:7:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"}],"id":64950,"initialValue":{"argumentTypes":null,"baseExpression":{"argumentTypes":null,"id":64947,"name":"globalShortAveragePrices","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64791,"src":"2419:24:90","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_uint256_$","typeString":"mapping(address => uint256)"}},"id":64949,"indexExpression":{"argumentTypes":null,"id":64948,"name":"_token","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64931,"src":"2444:6:90","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"2419:32:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"2396:55:90"},{"condition":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":64953,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"id":64951,"name":"size","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64939,"src":"2465:4:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"argumentTypes":null,"hexValue":"30","id":64952,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2473:1:90","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"2465:9:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":null,"id":64959,"nodeType":"IfStatement","src":"2461:37:90","trueBody":{"id":64958,"nodeType":"Block","src":"2476:22:90","statements":[{"expression":{"argumentTypes":null,"components":[{"argumentTypes":null,"hexValue":"66616c7365","id":64954,"isConstant":false,"isLValue":false,"isPure":true,"kind":"bool","lValueRequested":false,"nodeType":"Literal","src":"2486:5:90","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"value":"false"},{"argumentTypes":null,"hexValue":"30","id":64955,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2493:1:90","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"id":64956,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"TupleExpression","src":"2485:10:90","typeDescriptions":{"typeIdentifier":"t_tuple$_t_bool_$_t_rational_0_by_1_$","typeString":"tuple(bool,int_const 0)"}},"functionReturnParameters":64937,"id":64957,"nodeType":"Return","src":"2478:17:90"}]}},{"assignments":[64961],"declarations":[{"constant":false,"id":64961,"mutability":"mutable","name":"nextPrice","nodeType":"VariableDeclaration","overrides":null,"scope":65004,"src":"2508:17:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":64960,"name":"uint256","nodeType":"ElementaryTypeName","src":"2508:7:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"}],"id":64968,"initialValue":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":64966,"name":"_token","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64931,"src":"2554:6:90","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":64963,"name":"vault","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64778,"src":"2535:5:90","typeDescriptions":{"typeIdentifier":"t_contract$_IVault_$73463","typeString":"contract IVault"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_contract$_IVault_$73463","typeString":"contract IVault"}],"id":64962,"name":"IVault","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":73463,"src":"2528:6:90","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IVault_$73463_$","typeString":"type(contract IVault)"}},"id":64964,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"2528:13:90","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IVault_$73463","typeString":"contract IVault"}},"id":64965,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"getMaxPrice","nodeType":"MemberAccess","referencedDeclaration":73411,"src":"2528:25:90","typeDescriptions":{"typeIdentifier":"t_function_external_view$_t_address_$returns$_t_uint256_$","typeString":"function (address) view external returns (uint256)"}},"id":64967,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"2528:33:90","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"2508:53:90"},{"assignments":[64970],"declarations":[{"constant":false,"id":64970,"mutability":"mutable","name":"priceDelta","nodeType":"VariableDeclaration","overrides":null,"scope":65004,"src":"2571:18:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":64969,"name":"uint256","nodeType":"ElementaryTypeName","src":"2571:7:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"}],"id":64983,"initialValue":{"argumentTypes":null,"condition":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":64973,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"id":64971,"name":"averagePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64946,"src":"2592:12:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"argumentTypes":null,"id":64972,"name":"nextPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64961,"src":"2607:9:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2592:24:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseExpression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":64980,"name":"averagePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64946,"src":"2663:12:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"argumentTypes":null,"id":64978,"name":"nextPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64961,"src":"2649:9:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":64979,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"sub","nodeType":"MemberAccess","referencedDeclaration":77409,"src":"2649:13:90","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":64981,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"2649:27:90","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":64982,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"Conditional","src":"2592:84:90","trueExpression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":64976,"name":"nextPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64961,"src":"2636:9:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"argumentTypes":null,"id":64974,"name":"averagePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64946,"src":"2619:12:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":64975,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"sub","nodeType":"MemberAccess","referencedDeclaration":77409,"src":"2619:16:90","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":64977,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"2619:27:90","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"2571:105:90"},{"assignments":[64985],"declarations":[{"constant":false,"id":64985,"mutability":"mutable","name":"delta","nodeType":"VariableDeclaration","overrides":null,"scope":65004,"src":"2686:13:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":64984,"name":"uint256","nodeType":"ElementaryTypeName","src":"2686:7:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"}],"id":64993,"initialValue":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":64991,"name":"averagePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64946,"src":"2727:12:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":64988,"name":"priceDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64970,"src":"2711:10:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"argumentTypes":null,"id":64986,"name":"size","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64939,"src":"2702:4:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":64987,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"mul","nodeType":"MemberAccess","referencedDeclaration":77472,"src":"2702:8:90","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":64989,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"2702:20:90","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":64990,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"div","nodeType":"MemberAccess","referencedDeclaration":77489,"src":"2702:24:90","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":64992,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"2702:38:90","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"2686:54:90"},{"assignments":[64995],"declarations":[{"constant":false,"id":64995,"mutability":"mutable","name":"hasProfit","nodeType":"VariableDeclaration","overrides":null,"scope":65004,"src":"2750:14:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":64994,"name":"bool","nodeType":"ElementaryTypeName","src":"2750:4:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"value":null,"visibility":"internal"}],"id":64999,"initialValue":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":64998,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"id":64996,"name":"averagePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64946,"src":"2767:12:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"argumentTypes":null,"id":64997,"name":"nextPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64961,"src":"2782:9:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2767:24:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"VariableDeclarationStatement","src":"2750:41:90"},{"expression":{"argumentTypes":null,"components":[{"argumentTypes":null,"id":65000,"name":"hasProfit","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64995,"src":"2810:9:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"argumentTypes":null,"id":65001,"name":"delta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64985,"src":"2821:5:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":65002,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"2809:18:90","typeDescriptions":{"typeIdentifier":"t_tuple$_t_bool_$_t_uint256_$","typeString":"tuple(bool,uint256)"}},"functionReturnParameters":64937,"id":65003,"nodeType":"Return","src":"2802:25:90"}]},"documentation":null,"functionSelector":"b364accb","implemented":true,"kind":"function","modifiers":[],"name":"getGlobalShortDelta","overrides":null,"parameters":{"id":64932,"nodeType":"ParameterList","parameters":[{"constant":false,"id":64931,"mutability":"mutable","name":"_token","nodeType":"VariableDeclaration","overrides":null,"scope":65005,"src":"2279:14:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":64930,"name":"address","nodeType":"ElementaryTypeName","src":"2279:7:90","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"value":null,"visibility":"internal"}],"src":"2278:16:90"},"returnParameters":{"id":64937,"nodeType":"ParameterList","parameters":[{"constant":false,"id":64934,"mutability":"mutable","name":"","nodeType":"VariableDeclaration","overrides":null,"scope":65005,"src":"2316:4:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":64933,"name":"bool","nodeType":"ElementaryTypeName","src":"2316:4:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"value":null,"visibility":"internal"},{"constant":false,"id":64936,"mutability":"mutable","name":"","nodeType":"VariableDeclaration","overrides":null,"scope":65005,"src":"2322:7:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":64935,"name":"uint256","nodeType":"ElementaryTypeName","src":"2322:7:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"}],"src":"2315:15:90"},"scope":65437,"stateMutability":"view","virtual":false,"visibility":"public"},{"id":65051,"nodeType":"FunctionDefinition","src":"2841:369:90","nodes":[],"body":{"id":65050,"nodeType":"Block","src":"2951:259:90","nodes":[],"statements":[{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":65019,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"!","prefix":true,"src":"2969:23:90","subExpression":{"argumentTypes":null,"id":65018,"name":"isGlobalShortDataReady","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64794,"src":"2970:22:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"argumentTypes":null,"hexValue":"53686f727473547261636b65723a20616c7265616479206d69677261746564","id":65020,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"2994:33:90","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_stringliteral_b74aff559421eb4e443a51acea534ca3f49b7f0e6c8f0d058194fd503f67bee1","typeString":"literal_string \"ShortsTracker: already migrated\""},"value":"ShortsTracker: already migrated"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_b74aff559421eb4e443a51acea534ca3f49b7f0e6c8f0d058194fd503f67bee1","typeString":"literal_string \"ShortsTracker: already migrated\""}],"id":65017,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18],"referencedDeclaration":-18,"src":"2961:7:90","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":65021,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"2961:67:90","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":65022,"nodeType":"ExpressionStatement","src":"2961:67:90"},{"body":{"id":65044,"nodeType":"Block","src":"3084:81:90","statements":[{"expression":{"argumentTypes":null,"id":65042,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"baseExpression":{"argumentTypes":null,"id":65034,"name":"globalShortAveragePrices","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64791,"src":"3098:24:90","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_uint256_$","typeString":"mapping(address => uint256)"}},"id":65038,"indexExpression":{"argumentTypes":null,"baseExpression":{"argumentTypes":null,"id":65035,"name":"_tokens","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65008,"src":"3123:7:90","typeDescriptions":{"typeIdentifier":"t_array$_t_address_$dyn_calldata_ptr","typeString":"address[] calldata"}},"id":65037,"indexExpression":{"argumentTypes":null,"id":65036,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65024,"src":"3131:1:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"3123:10:90","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"nodeType":"IndexAccess","src":"3098:36:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"baseExpression":{"argumentTypes":null,"id":65039,"name":"_averagePrices","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65011,"src":"3137:14:90","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_calldata_ptr","typeString":"uint256[] calldata"}},"id":65041,"indexExpression":{"argumentTypes":null,"id":65040,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65024,"src":"3152:1:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"3137:17:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3098:56:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":65043,"nodeType":"ExpressionStatement","src":"3098:56:90"}]},"condition":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":65030,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"id":65027,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65024,"src":"3059:1:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"argumentTypes":null,"expression":{"argumentTypes":null,"id":65028,"name":"_tokens","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65008,"src":"3063:7:90","typeDescriptions":{"typeIdentifier":"t_array$_t_address_$dyn_calldata_ptr","typeString":"address[] calldata"}},"id":65029,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"length","nodeType":"MemberAccess","referencedDeclaration":null,"src":"3063:14:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3059:18:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":65045,"initializationExpression":{"assignments":[65024],"declarations":[{"constant":false,"id":65024,"mutability":"mutable","name":"i","nodeType":"VariableDeclaration","overrides":null,"scope":65045,"src":"3044:9:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":65023,"name":"uint256","nodeType":"ElementaryTypeName","src":"3044:7:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"}],"id":65026,"initialValue":{"argumentTypes":null,"hexValue":"30","id":65025,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3056:1:90","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"nodeType":"VariableDeclarationStatement","src":"3044:13:90"},"loopExpression":{"expression":{"argumentTypes":null,"id":65032,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"++","prefix":false,"src":"3079:3:90","subExpression":{"argumentTypes":null,"id":65031,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65024,"src":"3079:1:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":65033,"nodeType":"ExpressionStatement","src":"3079:3:90"},"nodeType":"ForStatement","src":"3039:126:90"},{"expression":{"argumentTypes":null,"id":65048,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"id":65046,"name":"isGlobalShortDataReady","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64794,"src":"3174:22:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"hexValue":"74727565","id":65047,"isConstant":false,"isLValue":false,"isPure":true,"kind":"bool","lValueRequested":false,"nodeType":"Literal","src":"3199:4:90","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"value":"true"},"src":"3174:29:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":65049,"nodeType":"ExpressionStatement","src":"3174:29:90"}]},"baseFunctions":[72826],"documentation":null,"functionSelector":"bbd97187","implemented":true,"kind":"function","modifiers":[{"arguments":null,"id":65015,"modifierName":{"argumentTypes":null,"id":65014,"name":"onlyGov","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":53758,"src":"2943:7:90","typeDescriptions":{"typeIdentifier":"t_modifier$__$","typeString":"modifier ()"}},"nodeType":"ModifierInvocation","src":"2943:7:90"}],"name":"setInitData","overrides":{"id":65013,"nodeType":"OverrideSpecifier","overrides":[],"src":"2925:8:90"},"parameters":{"id":65012,"nodeType":"ParameterList","parameters":[{"constant":false,"id":65008,"mutability":"mutable","name":"_tokens","nodeType":"VariableDeclaration","overrides":null,"scope":65051,"src":"2862:26:90","stateVariable":false,"storageLocation":"calldata","typeDescriptions":{"typeIdentifier":"t_array$_t_address_$dyn_calldata_ptr","typeString":"address[]"},"typeName":{"baseType":{"id":65006,"name":"address","nodeType":"ElementaryTypeName","src":"2862:7:90","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"id":65007,"length":null,"nodeType":"ArrayTypeName","src":"2862:9:90","typeDescriptions":{"typeIdentifier":"t_array$_t_address_$dyn_storage_ptr","typeString":"address[]"}},"value":null,"visibility":"internal"},{"constant":false,"id":65011,"mutability":"mutable","name":"_averagePrices","nodeType":"VariableDeclaration","overrides":null,"scope":65051,"src":"2890:33:90","stateVariable":false,"storageLocation":"calldata","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_calldata_ptr","typeString":"uint256[]"},"typeName":{"baseType":{"id":65009,"name":"uint256","nodeType":"ElementaryTypeName","src":"2890:7:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":65010,"length":null,"nodeType":"ArrayTypeName","src":"2890:9:90","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_storage_ptr","typeString":"uint256[]"}},"value":null,"visibility":"internal"}],"src":"2861:63:90"},"returnParameters":{"id":65016,"nodeType":"ParameterList","parameters":[],"src":"2951:0:90"},"scope":65437,"stateMutability":"nonpayable","virtual":false,"visibility":"external"},{"id":65172,"nodeType":"FunctionDefinition","src":"3216:1284:90","nodes":[],"body":{"id":65171,"nodeType":"Block","src":"3473:1027:90","nodes":[],"statements":[{"assignments":[65072],"declarations":[{"constant":false,"id":65072,"mutability":"mutable","name":"realisedPnl","nodeType":"VariableDeclaration","overrides":null,"scope":65171,"src":"3483:18:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":65071,"name":"int256","nodeType":"ElementaryTypeName","src":"3483:6:90","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"value":null,"visibility":"internal"}],"id":65080,"initialValue":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":65074,"name":"_account","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65053,"src":"3519:8:90","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"id":65075,"name":"_collateralToken","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65055,"src":"3528:16:90","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"id":65076,"name":"_indexToken","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65057,"src":"3546:11:90","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"id":65077,"name":"_sizeDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65061,"src":"3559:10:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"argumentTypes":null,"id":65078,"name":"_isIncrease","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65063,"src":"3571:11:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_bool","typeString":"bool"}],"id":65073,"name":"getRealisedPnl","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65253,"src":"3504:14:90","typeDescriptions":{"typeIdentifier":"t_function_internal_view$_t_address_$_t_address_$_t_address_$_t_uint256_$_t_bool_$returns$_t_int256_$","typeString":"function (address,address,address,uint256,bool) view returns (int256)"}},"id":65079,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3504:79:90","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"VariableDeclarationStatement","src":"3483:100:90"},{"assignments":[65082],"declarations":[{"constant":false,"id":65082,"mutability":"mutable","name":"averagePrice","nodeType":"VariableDeclaration","overrides":null,"scope":65171,"src":"3593:20:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":65081,"name":"uint256","nodeType":"ElementaryTypeName","src":"3593:7:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"}],"id":65086,"initialValue":{"argumentTypes":null,"baseExpression":{"argumentTypes":null,"id":65083,"name":"globalShortAveragePrices","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64791,"src":"3616:24:90","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_uint256_$","typeString":"mapping(address => uint256)"}},"id":65085,"indexExpression":{"argumentTypes":null,"id":65084,"name":"_indexToken","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65057,"src":"3641:11:90","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"3616:37:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"3593:60:90"},{"assignments":[65088],"declarations":[{"constant":false,"id":65088,"mutability":"mutable","name":"priceDelta","nodeType":"VariableDeclaration","overrides":null,"scope":65171,"src":"3663:18:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":65087,"name":"uint256","nodeType":"ElementaryTypeName","src":"3663:7:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"}],"id":65101,"initialValue":{"argumentTypes":null,"condition":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":65091,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"id":65089,"name":"averagePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65082,"src":"3684:12:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"argumentTypes":null,"id":65090,"name":"_nextPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65059,"src":"3699:10:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3684:25:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseExpression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":65098,"name":"averagePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65082,"src":"3758:12:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"argumentTypes":null,"id":65096,"name":"_nextPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65059,"src":"3743:10:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":65097,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"sub","nodeType":"MemberAccess","referencedDeclaration":77409,"src":"3743:14:90","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":65099,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3743:28:90","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":65100,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"Conditional","src":"3684:87:90","trueExpression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":65094,"name":"_nextPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65059,"src":"3729:10:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"argumentTypes":null,"id":65092,"name":"averagePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65082,"src":"3712:12:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":65093,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"sub","nodeType":"MemberAccess","referencedDeclaration":77409,"src":"3712:16:90","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":65095,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3712:28:90","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"3663:108:90"},{"assignments":[65103],"declarations":[{"constant":false,"id":65103,"mutability":"mutable","name":"nextSize","nodeType":"VariableDeclaration","overrides":null,"scope":65171,"src":"3782:16:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":65102,"name":"uint256","nodeType":"ElementaryTypeName","src":"3782:7:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"}],"id":65104,"initialValue":null,"nodeType":"VariableDeclarationStatement","src":"3782:16:90"},{"assignments":[65106],"declarations":[{"constant":false,"id":65106,"mutability":"mutable","name":"delta","nodeType":"VariableDeclaration","overrides":null,"scope":65171,"src":"3808:13:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":65105,"name":"uint256","nodeType":"ElementaryTypeName","src":"3808:7:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"}],"id":65107,"initialValue":null,"nodeType":"VariableDeclarationStatement","src":"3808:13:90"},{"id":65156,"nodeType":"Block","src":"3862:396:90","statements":[{"assignments":[65109],"declarations":[{"constant":false,"id":65109,"mutability":"mutable","name":"size","nodeType":"VariableDeclaration","overrides":null,"scope":65156,"src":"3876:12:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":65108,"name":"uint256","nodeType":"ElementaryTypeName","src":"3876:7:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"}],"id":65114,"initialValue":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":65112,"name":"_indexToken","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65057,"src":"3914:11:90","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"expression":{"argumentTypes":null,"id":65110,"name":"vault","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64778,"src":"3891:5:90","typeDescriptions":{"typeIdentifier":"t_contract$_IVault_$73463","typeString":"contract IVault"}},"id":65111,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"globalShortSizes","nodeType":"MemberAccess","referencedDeclaration":73325,"src":"3891:22:90","typeDescriptions":{"typeIdentifier":"t_function_external_view$_t_address_$returns$_t_uint256_$","typeString":"function (address) view external returns (uint256)"}},"id":65113,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3891:35:90","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"3876:50:90"},{"expression":{"argumentTypes":null,"id":65126,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"id":65115,"name":"nextSize","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65103,"src":"3940:8:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"condition":{"argumentTypes":null,"id":65116,"name":"_isIncrease","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65063,"src":"3951:11:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseExpression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":65123,"name":"_sizeDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65061,"src":"3997:10:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"argumentTypes":null,"id":65121,"name":"size","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65109,"src":"3988:4:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":65122,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"sub","nodeType":"MemberAccess","referencedDeclaration":77409,"src":"3988:8:90","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":65124,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3988:20:90","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":65125,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"Conditional","src":"3951:57:90","trueExpression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":65119,"name":"_sizeDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65061,"src":"3974:10:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"argumentTypes":null,"id":65117,"name":"size","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65109,"src":"3965:4:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":65118,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"add","nodeType":"MemberAccess","referencedDeclaration":77392,"src":"3965:8:90","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":65120,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3965:20:90","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3940:68:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":65127,"nodeType":"ExpressionStatement","src":"3940:68:90"},{"condition":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":65130,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"id":65128,"name":"nextSize","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65103,"src":"4027:8:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"argumentTypes":null,"hexValue":"30","id":65129,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4039:1:90","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"4027:13:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":null,"id":65136,"nodeType":"IfStatement","src":"4023:65:90","trueBody":{"id":65135,"nodeType":"Block","src":"4042:46:90","statements":[{"expression":{"argumentTypes":null,"components":[{"argumentTypes":null,"hexValue":"30","id":65131,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4068:1:90","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},{"argumentTypes":null,"hexValue":"30","id":65132,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4071:1:90","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"id":65133,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"TupleExpression","src":"4067:6:90","typeDescriptions":{"typeIdentifier":"t_tuple$_t_rational_0_by_1_$_t_rational_0_by_1_$","typeString":"tuple(int_const 0,int_const 0)"}},"functionReturnParameters":65070,"id":65134,"nodeType":"Return","src":"4060:13:90"}]}},{"condition":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":65139,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"id":65137,"name":"averagePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65082,"src":"4106:12:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"argumentTypes":null,"hexValue":"30","id":65138,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4122:1:90","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"4106:17:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":null,"id":65145,"nodeType":"IfStatement","src":"4102:85:90","trueBody":{"id":65144,"nodeType":"Block","src":"4125:62:90","statements":[{"expression":{"argumentTypes":null,"components":[{"argumentTypes":null,"id":65140,"name":"nextSize","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65103,"src":"4151:8:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"argumentTypes":null,"id":65141,"name":"_nextPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65059,"src":"4161:10:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":65142,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"4150:22:90","typeDescriptions":{"typeIdentifier":"t_tuple$_t_uint256_$_t_uint256_$","typeString":"tuple(uint256,uint256)"}},"functionReturnParameters":65070,"id":65143,"nodeType":"Return","src":"4143:29:90"}]}},{"expression":{"argumentTypes":null,"id":65154,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"id":65146,"name":"delta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65106,"src":"4201:5:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":65152,"name":"averagePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65082,"src":"4234:12:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":65149,"name":"priceDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65088,"src":"4218:10:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"argumentTypes":null,"id":65147,"name":"size","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65109,"src":"4209:4:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":65148,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"mul","nodeType":"MemberAccess","referencedDeclaration":77472,"src":"4209:8:90","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":65150,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4209:20:90","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":65151,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"div","nodeType":"MemberAccess","referencedDeclaration":77489,"src":"4209:24:90","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":65153,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4209:38:90","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4201:46:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":65155,"nodeType":"ExpressionStatement","src":"4201:46:90"}]},{"assignments":[65158],"declarations":[{"constant":false,"id":65158,"mutability":"mutable","name":"nextAveragePrice","nodeType":"VariableDeclaration","overrides":null,"scope":65171,"src":"4268:24:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":65157,"name":"uint256","nodeType":"ElementaryTypeName","src":"4268:7:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"}],"id":65166,"initialValue":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":65160,"name":"averagePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65082,"src":"4335:12:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"argumentTypes":null,"id":65161,"name":"_nextPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65059,"src":"4361:10:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"argumentTypes":null,"id":65162,"name":"nextSize","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65103,"src":"4385:8:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"argumentTypes":null,"id":65163,"name":"delta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65106,"src":"4407:5:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"argumentTypes":null,"id":65164,"name":"realisedPnl","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65072,"src":"4426:11:90","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_int256","typeString":"int256"}],"id":65159,"name":"_getNextGlobalAveragePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65301,"src":"4295:26:90","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_int256_$returns$_t_uint256_$","typeString":"function (uint256,uint256,uint256,uint256,int256) pure returns (uint256)"}},"id":65165,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4295:152:90","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"4268:179:90"},{"expression":{"argumentTypes":null,"components":[{"argumentTypes":null,"id":65167,"name":"nextSize","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65103,"src":"4466:8:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"argumentTypes":null,"id":65168,"name":"nextAveragePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65158,"src":"4476:16:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":65169,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"4465:28:90","typeDescriptions":{"typeIdentifier":"t_tuple$_t_uint256_$_t_uint256_$","typeString":"tuple(uint256,uint256)"}},"functionReturnParameters":65070,"id":65170,"nodeType":"Return","src":"4458:35:90"}]},"baseFunctions":[72795],"documentation":null,"functionSelector":"9cdeb593","implemented":true,"kind":"function","modifiers":[],"name":"getNextGlobalShortData","overrides":{"id":65065,"nodeType":"OverrideSpecifier","overrides":[],"src":"3425:8:90"},"parameters":{"id":65064,"nodeType":"ParameterList","parameters":[{"constant":false,"id":65053,"mutability":"mutable","name":"_account","nodeType":"VariableDeclaration","overrides":null,"scope":65172,"src":"3257:16:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":65052,"name":"address","nodeType":"ElementaryTypeName","src":"3257:7:90","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"value":null,"visibility":"internal"},{"constant":false,"id":65055,"mutability":"mutable","name":"_collateralToken","nodeType":"VariableDeclaration","overrides":null,"scope":65172,"src":"3283:24:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":65054,"name":"address","nodeType":"ElementaryTypeName","src":"3283:7:90","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"value":null,"visibility":"internal"},{"constant":false,"id":65057,"mutability":"mutable","name":"_indexToken","nodeType":"VariableDeclaration","overrides":null,"scope":65172,"src":"3317:19:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":65056,"name":"address","nodeType":"ElementaryTypeName","src":"3317:7:90","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"value":null,"visibility":"internal"},{"constant":false,"id":65059,"mutability":"mutable","name":"_nextPrice","nodeType":"VariableDeclaration","overrides":null,"scope":65172,"src":"3346:18:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":65058,"name":"uint256","nodeType":"ElementaryTypeName","src":"3346:7:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"},{"constant":false,"id":65061,"mutability":"mutable","name":"_sizeDelta","nodeType":"VariableDeclaration","overrides":null,"scope":65172,"src":"3374:18:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":65060,"name":"uint256","nodeType":"ElementaryTypeName","src":"3374:7:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"},{"constant":false,"id":65063,"mutability":"mutable","name":"_isIncrease","nodeType":"VariableDeclaration","overrides":null,"scope":65172,"src":"3402:16:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":65062,"name":"bool","nodeType":"ElementaryTypeName","src":"3402:4:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"value":null,"visibility":"internal"}],"src":"3247:177:90"},"returnParameters":{"id":65070,"nodeType":"ParameterList","parameters":[{"constant":false,"id":65067,"mutability":"mutable","name":"","nodeType":"VariableDeclaration","overrides":null,"scope":65172,"src":"3455:7:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":65066,"name":"uint256","nodeType":"ElementaryTypeName","src":"3455:7:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"},{"constant":false,"id":65069,"mutability":"mutable","name":"","nodeType":"VariableDeclaration","overrides":null,"scope":65172,"src":"3464:7:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":65068,"name":"uint256","nodeType":"ElementaryTypeName","src":"3464:7:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"}],"src":"3454:18:90"},"scope":65437,"stateMutability":"view","virtual":false,"visibility":"public"},{"id":65253,"nodeType":"FunctionDefinition","src":"4506:851:90","nodes":[],"body":{"id":65252,"nodeType":"Block","src":"4708:649:90","nodes":[],"statements":[{"condition":{"argumentTypes":null,"id":65187,"name":"_isIncrease","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65182,"src":"4722:11:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":null,"id":65191,"nodeType":"IfStatement","src":"4718:50:90","trueBody":{"id":65190,"nodeType":"Block","src":"4735:33:90","statements":[{"expression":{"argumentTypes":null,"hexValue":"30","id":65188,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4756:1:90","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"functionReturnParameters":65186,"id":65189,"nodeType":"Return","src":"4749:8:90"}]}},{"assignments":[65193],"declarations":[{"constant":false,"id":65193,"mutability":"mutable","name":"_vault","nodeType":"VariableDeclaration","overrides":null,"scope":65252,"src":"4778:13:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_contract$_IVault_$73463","typeString":"contract IVault"},"typeName":{"contractScope":null,"id":65192,"name":"IVault","nodeType":"UserDefinedTypeName","referencedDeclaration":73463,"src":"4778:6:90","typeDescriptions":{"typeIdentifier":"t_contract$_IVault_$73463","typeString":"contract IVault"}},"value":null,"visibility":"internal"}],"id":65195,"initialValue":{"argumentTypes":null,"id":65194,"name":"vault","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64778,"src":"4794:5:90","typeDescriptions":{"typeIdentifier":"t_contract$_IVault_$73463","typeString":"contract IVault"}},"nodeType":"VariableDeclarationStatement","src":"4778:21:90"},{"assignments":[65197,null,65199,null,null,null,null,65201],"declarations":[{"constant":false,"id":65197,"mutability":"mutable","name":"size","nodeType":"VariableDeclaration","overrides":null,"scope":65252,"src":"4810:12:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":65196,"name":"uint256","nodeType":"ElementaryTypeName","src":"4810:7:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"},null,{"constant":false,"id":65199,"mutability":"mutable","name":"averagePrice","nodeType":"VariableDeclaration","overrides":null,"scope":65252,"src":"4848:20:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":65198,"name":"uint256","nodeType":"ElementaryTypeName","src":"4848:7:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"},null,null,null,null,{"constant":false,"id":65201,"mutability":"mutable","name":"lastIncreasedTime","nodeType":"VariableDeclaration","overrides":null,"scope":65252,"src":"4878:25:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":65200,"name":"uint256","nodeType":"ElementaryTypeName","src":"4878:7:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"}],"id":65209,"initialValue":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":65204,"name":"_account","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65174,"src":"4926:8:90","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"id":65205,"name":"_collateralToken","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65176,"src":"4936:16:90","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"id":65206,"name":"_indexToken","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65178,"src":"4954:11:90","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"hexValue":"66616c7365","id":65207,"isConstant":false,"isLValue":false,"isPure":true,"kind":"bool","lValueRequested":false,"nodeType":"Literal","src":"4967:5:90","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"value":"false"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_bool","typeString":"bool"}],"expression":{"argumentTypes":null,"id":65202,"name":"_vault","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65193,"src":"4907:6:90","typeDescriptions":{"typeIdentifier":"t_contract$_IVault_$73463","typeString":"contract IVault"}},"id":65203,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"getPosition","nodeType":"MemberAccess","referencedDeclaration":73462,"src":"4907:18:90","typeDescriptions":{"typeIdentifier":"t_function_external_view$_t_address_$_t_address_$_t_address_$_t_bool_$returns$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_bool_$_t_uint256_$","typeString":"function (address,address,address,bool) view external returns (uint256,uint256,uint256,uint256,uint256,uint256,bool,uint256)"}},"id":65208,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4907:66:90","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_bool_$_t_uint256_$","typeString":"tuple(uint256,uint256,uint256,uint256,uint256,uint256,bool,uint256)"}},"nodeType":"VariableDeclarationStatement","src":"4809:164:90"},{"assignments":[65211,65213],"declarations":[{"constant":false,"id":65211,"mutability":"mutable","name":"hasProfit","nodeType":"VariableDeclaration","overrides":null,"scope":65252,"src":"4985:14:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":65210,"name":"bool","nodeType":"ElementaryTypeName","src":"4985:4:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"value":null,"visibility":"internal"},{"constant":false,"id":65213,"mutability":"mutable","name":"delta","nodeType":"VariableDeclaration","overrides":null,"scope":65252,"src":"5001:13:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":65212,"name":"uint256","nodeType":"ElementaryTypeName","src":"5001:7:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"}],"id":65222,"initialValue":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":65216,"name":"_indexToken","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65178,"src":"5034:11:90","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"id":65217,"name":"size","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65197,"src":"5047:4:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"argumentTypes":null,"id":65218,"name":"averagePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65199,"src":"5053:12:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"argumentTypes":null,"hexValue":"66616c7365","id":65219,"isConstant":false,"isLValue":false,"isPure":true,"kind":"bool","lValueRequested":false,"nodeType":"Literal","src":"5067:5:90","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"value":"false"},{"argumentTypes":null,"id":65220,"name":"lastIncreasedTime","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65201,"src":"5074:17:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"argumentTypes":null,"id":65214,"name":"_vault","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65193,"src":"5018:6:90","typeDescriptions":{"typeIdentifier":"t_contract$_IVault_$73463","typeString":"contract IVault"}},"id":65215,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"getDelta","nodeType":"MemberAccess","referencedDeclaration":73435,"src":"5018:15:90","typeDescriptions":{"typeIdentifier":"t_function_external_view$_t_address_$_t_uint256_$_t_uint256_$_t_bool_$_t_uint256_$returns$_t_bool_$_t_uint256_$","typeString":"function (address,uint256,uint256,bool,uint256) view external returns (bool,uint256)"}},"id":65221,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"5018:74:90","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$_t_bool_$_t_uint256_$","typeString":"tuple(bool,uint256)"}},"nodeType":"VariableDeclarationStatement","src":"4984:108:90"},{"assignments":[65224],"declarations":[{"constant":false,"id":65224,"mutability":"mutable","name":"adjustedDelta","nodeType":"VariableDeclaration","overrides":null,"scope":65252,"src":"5148:21:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":65223,"name":"uint256","nodeType":"ElementaryTypeName","src":"5148:7:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"}],"id":65232,"initialValue":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":65230,"name":"size","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65197,"src":"5198:4:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":65227,"name":"delta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65213,"src":"5187:5:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"argumentTypes":null,"id":65225,"name":"_sizeDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65180,"src":"5172:10:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":65226,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"mul","nodeType":"MemberAccess","referencedDeclaration":77472,"src":"5172:14:90","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":65228,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"5172:21:90","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":65229,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"div","nodeType":"MemberAccess","referencedDeclaration":77489,"src":"5172:25:90","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":65231,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"5172:31:90","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"5148:55:90"},{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":65236,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"id":65234,"name":"adjustedDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65224,"src":"5221:13:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"argumentTypes":null,"id":65235,"name":"MAX_INT256","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64776,"src":"5237:10:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"5221:26:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"argumentTypes":null,"hexValue":"53686f727473547261636b65723a206f766572666c6f77","id":65237,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"5249:25:90","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_stringliteral_5d5cea51d82e1abca3d2b7ea9999f793f9a386ab0bccbd1010ee4f2ea516eedd","typeString":"literal_string \"ShortsTracker: overflow\""},"value":"ShortsTracker: overflow"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_5d5cea51d82e1abca3d2b7ea9999f793f9a386ab0bccbd1010ee4f2ea516eedd","typeString":"literal_string \"ShortsTracker: overflow\""}],"id":65233,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18],"referencedDeclaration":-18,"src":"5213:7:90","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":65238,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"5213:62:90","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":65239,"nodeType":"ExpressionStatement","src":"5213:62:90"},{"expression":{"argumentTypes":null,"condition":{"argumentTypes":null,"id":65240,"name":"hasProfit","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65211,"src":"5292:9:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseExpression":{"argumentTypes":null,"id":65249,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"-","prefix":true,"src":"5328:22:90","subExpression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":65247,"name":"adjustedDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65224,"src":"5336:13:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":65246,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"5329:6:90","typeDescriptions":{"typeIdentifier":"t_type$_t_int256_$","typeString":"type(int256)"},"typeName":{"id":65245,"name":"int256","nodeType":"ElementaryTypeName","src":"5329:6:90","typeDescriptions":{"typeIdentifier":null,"typeString":null}}},"id":65248,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"5329:21:90","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"id":65250,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"Conditional","src":"5292:58:90","trueExpression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":65243,"name":"adjustedDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65224,"src":"5311:13:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":65242,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"5304:6:90","typeDescriptions":{"typeIdentifier":"t_type$_t_int256_$","typeString":"type(int256)"},"typeName":{"id":65241,"name":"int256","nodeType":"ElementaryTypeName","src":"5304:6:90","typeDescriptions":{"typeIdentifier":null,"typeString":null}}},"id":65244,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"5304:21:90","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"functionReturnParameters":65186,"id":65251,"nodeType":"Return","src":"5285:65:90"}]},"documentation":null,"functionSelector":"a83b75fd","implemented":true,"kind":"function","modifiers":[],"name":"getRealisedPnl","overrides":null,"parameters":{"id":65183,"nodeType":"ParameterList","parameters":[{"constant":false,"id":65174,"mutability":"mutable","name":"_account","nodeType":"VariableDeclaration","overrides":null,"scope":65253,"src":"4539:16:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":65173,"name":"address","nodeType":"ElementaryTypeName","src":"4539:7:90","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"value":null,"visibility":"internal"},{"constant":false,"id":65176,"mutability":"mutable","name":"_collateralToken","nodeType":"VariableDeclaration","overrides":null,"scope":65253,"src":"4565:24:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":65175,"name":"address","nodeType":"ElementaryTypeName","src":"4565:7:90","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"value":null,"visibility":"internal"},{"constant":false,"id":65178,"mutability":"mutable","name":"_indexToken","nodeType":"VariableDeclaration","overrides":null,"scope":65253,"src":"4599:19:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":65177,"name":"address","nodeType":"ElementaryTypeName","src":"4599:7:90","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"value":null,"visibility":"internal"},{"constant":false,"id":65180,"mutability":"mutable","name":"_sizeDelta","nodeType":"VariableDeclaration","overrides":null,"scope":65253,"src":"4628:18:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":65179,"name":"uint256","nodeType":"ElementaryTypeName","src":"4628:7:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"},{"constant":false,"id":65182,"mutability":"mutable","name":"_isIncrease","nodeType":"VariableDeclaration","overrides":null,"scope":65253,"src":"4656:16:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":65181,"name":"bool","nodeType":"ElementaryTypeName","src":"4656:4:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"value":null,"visibility":"internal"}],"src":"4529:149:90"},"returnParameters":{"id":65186,"nodeType":"ParameterList","parameters":[{"constant":false,"id":65185,"mutability":"mutable","name":"","nodeType":"VariableDeclaration","overrides":null,"scope":65253,"src":"4700:6:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":65184,"name":"int256","nodeType":"ElementaryTypeName","src":"4700:6:90","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"value":null,"visibility":"internal"}],"src":"4699:8:90"},"scope":65437,"stateMutability":"view","virtual":false,"visibility":"public"},{"id":65301,"nodeType":"FunctionDefinition","src":"5363:520:90","nodes":[],"body":{"id":65300,"nodeType":"Block","src":"5574:309:90","nodes":[],"statements":[{"assignments":[65269,65271],"declarations":[{"constant":false,"id":65269,"mutability":"mutable","name":"hasProfit","nodeType":"VariableDeclaration","overrides":null,"scope":65300,"src":"5585:14:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":65268,"name":"bool","nodeType":"ElementaryTypeName","src":"5585:4:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"value":null,"visibility":"internal"},{"constant":false,"id":65271,"mutability":"mutable","name":"nextDelta","nodeType":"VariableDeclaration","overrides":null,"scope":65300,"src":"5601:17:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":65270,"name":"uint256","nodeType":"ElementaryTypeName","src":"5601:7:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"}],"id":65278,"initialValue":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":65273,"name":"_delta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65261,"src":"5636:6:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"argumentTypes":null,"id":65274,"name":"_averagePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65255,"src":"5644:13:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"argumentTypes":null,"id":65275,"name":"_nextPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65257,"src":"5659:10:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"argumentTypes":null,"id":65276,"name":"_realisedPnl","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65263,"src":"5671:12:90","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_int256","typeString":"int256"}],"id":65272,"name":"_getNextDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65436,"src":"5622:13:90","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_int256_$returns$_t_bool_$_t_uint256_$","typeString":"function (uint256,uint256,uint256,int256) pure returns (bool,uint256)"}},"id":65277,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"5622:62:90","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$_t_bool_$_t_uint256_$","typeString":"tuple(bool,uint256)"}},"nodeType":"VariableDeclarationStatement","src":"5584:100:90"},{"assignments":[65280],"declarations":[{"constant":false,"id":65280,"mutability":"mutable","name":"nextAveragePrice","nodeType":"VariableDeclaration","overrides":null,"scope":65300,"src":"5695:24:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":65279,"name":"uint256","nodeType":"ElementaryTypeName","src":"5695:7:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"}],"id":65297,"initialValue":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"condition":{"argumentTypes":null,"id":65286,"name":"hasProfit","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65269,"src":"5778:9:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseExpression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":65293,"name":"nextDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65271,"src":"5831:9:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"argumentTypes":null,"id":65291,"name":"_nextSize","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65259,"src":"5817:9:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":65292,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"add","nodeType":"MemberAccess","referencedDeclaration":77392,"src":"5817:13:90","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":65294,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"5817:24:90","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":65295,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"Conditional","src":"5778:63:90","trueExpression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":65289,"name":"nextDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65271,"src":"5804:9:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"argumentTypes":null,"id":65287,"name":"_nextSize","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65259,"src":"5790:9:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":65288,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"sub","nodeType":"MemberAccess","referencedDeclaration":77409,"src":"5790:13:90","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":65290,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"5790:24:90","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":65283,"name":"_nextSize","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65259,"src":"5750:9:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"argumentTypes":null,"id":65281,"name":"_nextPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65257,"src":"5722:10:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":65282,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"mul","nodeType":"MemberAccess","referencedDeclaration":77472,"src":"5722:27:90","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":65284,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"5722:38:90","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":65285,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"div","nodeType":"MemberAccess","referencedDeclaration":77489,"src":"5722:55:90","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":65296,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"5722:120:90","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"5695:147:90"},{"expression":{"argumentTypes":null,"id":65298,"name":"nextAveragePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65280,"src":"5860:16:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":65267,"id":65299,"nodeType":"Return","src":"5853:23:90"}]},"documentation":null,"functionSelector":"5886b711","implemented":true,"kind":"function","modifiers":[],"name":"_getNextGlobalAveragePrice","overrides":null,"parameters":{"id":65264,"nodeType":"ParameterList","parameters":[{"constant":false,"id":65255,"mutability":"mutable","name":"_averagePrice","nodeType":"VariableDeclaration","overrides":null,"scope":65301,"src":"5408:21:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":65254,"name":"uint256","nodeType":"ElementaryTypeName","src":"5408:7:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"},{"constant":false,"id":65257,"mutability":"mutable","name":"_nextPrice","nodeType":"VariableDeclaration","overrides":null,"scope":65301,"src":"5439:18:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":65256,"name":"uint256","nodeType":"ElementaryTypeName","src":"5439:7:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"},{"constant":false,"id":65259,"mutability":"mutable","name":"_nextSize","nodeType":"VariableDeclaration","overrides":null,"scope":65301,"src":"5467:17:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":65258,"name":"uint256","nodeType":"ElementaryTypeName","src":"5467:7:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"},{"constant":false,"id":65261,"mutability":"mutable","name":"_delta","nodeType":"VariableDeclaration","overrides":null,"scope":65301,"src":"5494:14:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":65260,"name":"uint256","nodeType":"ElementaryTypeName","src":"5494:7:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"},{"constant":false,"id":65263,"mutability":"mutable","name":"_realisedPnl","nodeType":"VariableDeclaration","overrides":null,"scope":65301,"src":"5518:19:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":65262,"name":"int256","nodeType":"ElementaryTypeName","src":"5518:6:90","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"value":null,"visibility":"internal"}],"src":"5398:145:90"},"returnParameters":{"id":65267,"nodeType":"ParameterList","parameters":[{"constant":false,"id":65266,"mutability":"mutable","name":"","nodeType":"VariableDeclaration","overrides":null,"scope":65301,"src":"5565:7:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":65265,"name":"uint256","nodeType":"ElementaryTypeName","src":"5565:7:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"}],"src":"5564:9:90"},"scope":65437,"stateMutability":"pure","virtual":false,"visibility":"public"},{"id":65436,"nodeType":"FunctionDefinition","src":"5889:1580:90","nodes":[],"body":{"id":65435,"nodeType":"Block","src":"6068:1401:90","nodes":[],"statements":[{"assignments":[65317],"declarations":[{"constant":false,"id":65317,"mutability":"mutable","name":"hasProfit","nodeType":"VariableDeclaration","overrides":null,"scope":65435,"src":"6508:14:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":65316,"name":"bool","nodeType":"ElementaryTypeName","src":"6508:4:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"value":null,"visibility":"internal"}],"id":65321,"initialValue":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":65320,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"id":65318,"name":"_averagePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65305,"src":"6525:13:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"argumentTypes":null,"id":65319,"name":"_nextPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65307,"src":"6541:10:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"6525:26:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"VariableDeclarationStatement","src":"6508:43:90"},{"condition":{"argumentTypes":null,"id":65322,"name":"hasProfit","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65317,"src":"6565:9:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":null,"id":65378,"nodeType":"IfStatement","src":"6561:508:90","trueBody":{"id":65377,"nodeType":"Block","src":"6576:493:90","statements":[{"condition":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_int256","typeString":"int256"},"id":65325,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"id":65323,"name":"_realisedPnl","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65309,"src":"6639:12:90","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"argumentTypes":null,"hexValue":"30","id":65324,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"6654:1:90","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"6639:16:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"id":65371,"nodeType":"Block","src":"6942:76:90","statements":[{"expression":{"argumentTypes":null,"id":65369,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"id":65360,"name":"_delta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65303,"src":"6960:6:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":65366,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"-","prefix":true,"src":"6988:13:90","subExpression":{"argumentTypes":null,"id":65365,"name":"_realisedPnl","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65309,"src":"6989:12:90","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_int256","typeString":"int256"}],"id":65364,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"6980:7:90","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":65363,"name":"uint256","nodeType":"ElementaryTypeName","src":"6980:7:90","typeDescriptions":{"typeIdentifier":null,"typeString":null}}},"id":65367,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"6980:22:90","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"argumentTypes":null,"id":65361,"name":"_delta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65303,"src":"6969:6:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":65362,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"add","nodeType":"MemberAccess","referencedDeclaration":77392,"src":"6969:10:90","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":65368,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"6969:34:90","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"6960:43:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":65370,"nodeType":"ExpressionStatement","src":"6960:43:90"}]},"id":65372,"nodeType":"IfStatement","src":"6635:383:90","trueBody":{"id":65359,"nodeType":"Block","src":"6657:279:90","statements":[{"condition":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":65331,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":65328,"name":"_realisedPnl","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65309,"src":"6687:12:90","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_int256","typeString":"int256"}],"id":65327,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"6679:7:90","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":65326,"name":"uint256","nodeType":"ElementaryTypeName","src":"6679:7:90","typeDescriptions":{"typeIdentifier":null,"typeString":null}}},"id":65329,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"6679:21:90","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"argumentTypes":null,"id":65330,"name":"_delta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65303,"src":"6703:6:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"6679:30:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"id":65357,"nodeType":"Block","src":"6839:83:90","statements":[{"expression":{"argumentTypes":null,"id":65355,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"id":65347,"name":"_delta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65303,"src":"6861:6:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":65352,"name":"_realisedPnl","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65309,"src":"6889:12:90","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_int256","typeString":"int256"}],"id":65351,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"6881:7:90","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":65350,"name":"uint256","nodeType":"ElementaryTypeName","src":"6881:7:90","typeDescriptions":{"typeIdentifier":null,"typeString":null}}},"id":65353,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"6881:21:90","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"argumentTypes":null,"id":65348,"name":"_delta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65303,"src":"6870:6:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":65349,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"sub","nodeType":"MemberAccess","referencedDeclaration":77409,"src":"6870:10:90","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":65354,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"6870:33:90","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"6861:42:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":65356,"nodeType":"ExpressionStatement","src":"6861:42:90"}]},"id":65358,"nodeType":"IfStatement","src":"6675:247:90","trueBody":{"id":65346,"nodeType":"Block","src":"6711:122:90","statements":[{"expression":{"argumentTypes":null,"id":65340,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"id":65332,"name":"_delta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65303,"src":"6733:6:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":65338,"name":"_delta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65303,"src":"6768:6:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":65335,"name":"_realisedPnl","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65309,"src":"6750:12:90","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_int256","typeString":"int256"}],"id":65334,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"6742:7:90","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":65333,"name":"uint256","nodeType":"ElementaryTypeName","src":"6742:7:90","typeDescriptions":{"typeIdentifier":null,"typeString":null}}},"id":65336,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"6742:21:90","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":65337,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"sub","nodeType":"MemberAccess","referencedDeclaration":77409,"src":"6742:25:90","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":65339,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"6742:33:90","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"6733:42:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":65341,"nodeType":"ExpressionStatement","src":"6733:42:90"},{"expression":{"argumentTypes":null,"id":65344,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"id":65342,"name":"hasProfit","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65317,"src":"6797:9:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"hexValue":"66616c7365","id":65343,"isConstant":false,"isLValue":false,"isPure":true,"kind":"bool","lValueRequested":false,"nodeType":"Literal","src":"6809:5:90","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"value":"false"},"src":"6797:17:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":65345,"nodeType":"ExpressionStatement","src":"6797:17:90"}]}}]}},{"expression":{"argumentTypes":null,"components":[{"argumentTypes":null,"id":65373,"name":"hasProfit","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65317,"src":"7040:9:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"argumentTypes":null,"id":65374,"name":"_delta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65303,"src":"7051:6:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":65375,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"7039:19:90","typeDescriptions":{"typeIdentifier":"t_tuple$_t_bool_$_t_uint256_$","typeString":"tuple(bool,uint256)"}},"functionReturnParameters":65315,"id":65376,"nodeType":"Return","src":"7032:26:90"}]}},{"condition":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_int256","typeString":"int256"},"id":65381,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"id":65379,"name":"_realisedPnl","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65309,"src":"7083:12:90","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"argumentTypes":null,"hexValue":"30","id":65380,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"7098:1:90","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"7083:16:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"id":65429,"nodeType":"Block","src":"7174:253:90","statements":[{"condition":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":65399,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":65396,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"-","prefix":true,"src":"7200:13:90","subExpression":{"argumentTypes":null,"id":65395,"name":"_realisedPnl","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65309,"src":"7201:12:90","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_int256","typeString":"int256"}],"id":65394,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"7192:7:90","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":65393,"name":"uint256","nodeType":"ElementaryTypeName","src":"7192:7:90","typeDescriptions":{"typeIdentifier":null,"typeString":null}}},"id":65397,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"7192:22:90","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"argumentTypes":null,"id":65398,"name":"_delta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65303,"src":"7217:6:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"7192:31:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"id":65427,"nodeType":"Block","src":"7341:76:90","statements":[{"expression":{"argumentTypes":null,"id":65425,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"id":65416,"name":"_delta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65303,"src":"7359:6:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":65422,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"-","prefix":true,"src":"7387:13:90","subExpression":{"argumentTypes":null,"id":65421,"name":"_realisedPnl","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65309,"src":"7388:12:90","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_int256","typeString":"int256"}],"id":65420,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"7379:7:90","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":65419,"name":"uint256","nodeType":"ElementaryTypeName","src":"7379:7:90","typeDescriptions":{"typeIdentifier":null,"typeString":null}}},"id":65423,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"7379:22:90","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"argumentTypes":null,"id":65417,"name":"_delta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65303,"src":"7368:6:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":65418,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"sub","nodeType":"MemberAccess","referencedDeclaration":77409,"src":"7368:10:90","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":65424,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"7368:34:90","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"7359:43:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":65426,"nodeType":"ExpressionStatement","src":"7359:43:90"}]},"id":65428,"nodeType":"IfStatement","src":"7188:229:90","trueBody":{"id":65415,"nodeType":"Block","src":"7225:110:90","statements":[{"expression":{"argumentTypes":null,"id":65409,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"id":65400,"name":"_delta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65303,"src":"7243:6:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":65407,"name":"_delta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65303,"src":"7279:6:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":65404,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"-","prefix":true,"src":"7260:13:90","subExpression":{"argumentTypes":null,"id":65403,"name":"_realisedPnl","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65309,"src":"7261:12:90","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_int256","typeString":"int256"}],"id":65402,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"7252:7:90","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":65401,"name":"uint256","nodeType":"ElementaryTypeName","src":"7252:7:90","typeDescriptions":{"typeIdentifier":null,"typeString":null}}},"id":65405,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"7252:22:90","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":65406,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"sub","nodeType":"MemberAccess","referencedDeclaration":77409,"src":"7252:26:90","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":65408,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"7252:34:90","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"7243:43:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":65410,"nodeType":"ExpressionStatement","src":"7243:43:90"},{"expression":{"argumentTypes":null,"id":65413,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"id":65411,"name":"hasProfit","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65317,"src":"7304:9:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"hexValue":"74727565","id":65412,"isConstant":false,"isLValue":false,"isPure":true,"kind":"bool","lValueRequested":false,"nodeType":"Literal","src":"7316:4:90","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"value":"true"},"src":"7304:16:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":65414,"nodeType":"ExpressionStatement","src":"7304:16:90"}]}}]},"id":65430,"nodeType":"IfStatement","src":"7079:348:90","trueBody":{"id":65392,"nodeType":"Block","src":"7101:67:90","statements":[{"expression":{"argumentTypes":null,"id":65390,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"id":65382,"name":"_delta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65303,"src":"7115:6:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":65387,"name":"_realisedPnl","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65309,"src":"7143:12:90","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_int256","typeString":"int256"}],"id":65386,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"7135:7:90","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":65385,"name":"uint256","nodeType":"ElementaryTypeName","src":"7135:7:90","typeDescriptions":{"typeIdentifier":null,"typeString":null}}},"id":65388,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"7135:21:90","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"argumentTypes":null,"id":65383,"name":"_delta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65303,"src":"7124:6:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":65384,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"add","nodeType":"MemberAccess","referencedDeclaration":77392,"src":"7124:10:90","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":65389,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"7124:33:90","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"7115:42:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":65391,"nodeType":"ExpressionStatement","src":"7115:42:90"}]}},{"expression":{"argumentTypes":null,"components":[{"argumentTypes":null,"id":65431,"name":"hasProfit","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65317,"src":"7444:9:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"argumentTypes":null,"id":65432,"name":"_delta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65303,"src":"7455:6:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":65433,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"7443:19:90","typeDescriptions":{"typeIdentifier":"t_tuple$_t_bool_$_t_uint256_$","typeString":"tuple(bool,uint256)"}},"functionReturnParameters":65315,"id":65434,"nodeType":"Return","src":"7436:26:90"}]},"documentation":null,"implemented":true,"kind":"function","modifiers":[],"name":"_getNextDelta","overrides":null,"parameters":{"id":65310,"nodeType":"ParameterList","parameters":[{"constant":false,"id":65303,"mutability":"mutable","name":"_delta","nodeType":"VariableDeclaration","overrides":null,"scope":65436,"src":"5921:14:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":65302,"name":"uint256","nodeType":"ElementaryTypeName","src":"5921:7:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"},{"constant":false,"id":65305,"mutability":"mutable","name":"_averagePrice","nodeType":"VariableDeclaration","overrides":null,"scope":65436,"src":"5945:21:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":65304,"name":"uint256","nodeType":"ElementaryTypeName","src":"5945:7:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"},{"constant":false,"id":65307,"mutability":"mutable","name":"_nextPrice","nodeType":"VariableDeclaration","overrides":null,"scope":65436,"src":"5976:18:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":65306,"name":"uint256","nodeType":"ElementaryTypeName","src":"5976:7:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"},{"constant":false,"id":65309,"mutability":"mutable","name":"_realisedPnl","nodeType":"VariableDeclaration","overrides":null,"scope":65436,"src":"6004:19:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":65308,"name":"int256","nodeType":"ElementaryTypeName","src":"6004:6:90","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"value":null,"visibility":"internal"}],"src":"5911:118:90"},"returnParameters":{"id":65315,"nodeType":"ParameterList","parameters":[{"constant":false,"id":65312,"mutability":"mutable","name":"","nodeType":"VariableDeclaration","overrides":null,"scope":65436,"src":"6053:4:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":65311,"name":"bool","nodeType":"ElementaryTypeName","src":"6053:4:90","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"value":null,"visibility":"internal"},{"constant":false,"id":65314,"mutability":"mutable","name":"","nodeType":"VariableDeclaration","overrides":null,"scope":65436,"src":"6059:7:90","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":65313,"name":"uint256","nodeType":"ElementaryTypeName","src":"6059:7:90","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"}],"src":"6052:15:90"},"scope":65437,"stateMutability":"pure","virtual":false,"visibility":"internal"}],"abstract":false,"baseContracts":[{"arguments":null,"baseName":{"contractScope":null,"id":64752,"name":"Governable","nodeType":"UserDefinedTypeName","referencedDeclaration":53771,"src":"238:10:90","typeDescriptions":{"typeIdentifier":"t_contract$_Governable_$53771","typeString":"contract Governable"}},"id":64753,"nodeType":"InheritanceSpecifier","src":"238:10:90"},{"arguments":null,"baseName":{"contractScope":null,"id":64754,"name":"IShortsTracker","nodeType":"UserDefinedTypeName","referencedDeclaration":72827,"src":"250:14:90","typeDescriptions":{"typeIdentifier":"t_contract$_IShortsTracker_$72827","typeString":"contract IShortsTracker"}},"id":64755,"nodeType":"InheritanceSpecifier","src":"250:14:90"}],"contractDependencies":[53771,72827],"contractKind":"contract","documentation":null,"fullyImplemented":true,"linearizedBaseContracts":[65437,72827,53771],"name":"ShortsTracker","scope":65438}],"license":"MIT"},"id":90}